{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/*\nCopyright (c) 2018-2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\n\n\nimport * as React from 'react';\nimport { getOverrides } from '../helpers/overrides.js';\nimport DeleteAlt from '../icon/delete-alt.js';\nimport TriangleDownIcon from '../icon/triangle-down.js';\nimport SearchIconComponent from '../icon/search.js';\nimport { LocaleContext } from '../locale/index.js';\nimport { Popover, PLACEMENT } from '../popover/index.js';\nimport { Spinner } from '../spinner/index.js';\nimport getBuiId from '../utils/get-bui-id.js';\nimport AutosizeInput from './autosize-input.js';\nimport { TYPE, STATE_CHANGE_TYPE } from './constants.js';\nimport defaultProps from './default-props.js';\nimport SelectDropdown from './dropdown.js';\nimport { StyledRoot, StyledControlContainer, StyledPlaceholder, StyledValueContainer, StyledInputContainer, StyledIconsContainer, StyledSelectArrow, StyledClearIcon, getLoadingIconStyles, StyledSearchIconContainer } from './styled-components.js';\nimport { expandValue, normalizeOptions } from './utils/index.js';\n\nfunction Noop() {\n  return null;\n}\n\nvar isClick = function isClick(event) {\n  return event.type === 'click';\n};\n\nvar isLeftClick = function isLeftClick(event) {\n  return event.button !== null && event.button !== undefined && event.button === 0;\n};\n\nvar containsNode = function containsNode(parent, child) {\n  if (typeof document !== 'undefined') {\n    // eslint-disable-next-line flowtype/no-weak-types\n    return child && parent && parent.contains(child);\n  }\n};\n\nexport function isInteractive(rootTarget, rootElement) {\n  if (rootTarget instanceof Element) {\n    var target = rootTarget;\n\n    while (target && target !== rootElement) {\n      var role = target.getAttribute('role');\n\n      if (role === 'button' || role === 'link') {\n        return true;\n      }\n\n      if (target.tagName) target = target.parentElement;\n    }\n  }\n\n  return false;\n} // eslint-disable-next-line flowtype/no-weak-types\n\nvar Select = /*#__PURE__*/function (_React$Component) {\n  _inherits(Select, _React$Component); // anchor is a ref that refers to the outermost element rendered when the dropdown menu is not\n  // open. This is required so that we can check if clicks are on/off the anchor element.\n  // dropdown is a ref that refers to the popover element. This is required so that we can check if\n  // clicks are on/off the dropdown element.\n  // dragging is a flag to track whether a mobile device is currently scrolling versus clicking.\n  // focusAfterClear is a flag to indicate that the dropdowm menu should open after a selected\n  // option has been cleared.\n  // openAfterFocus is a flag to indicate that the dropdown menu should open when the component is\n  // focused. Developers have the option to disable initial clicks opening the dropdown menu. If not\n  // disabled, clicks will set this flag to true. Upon focusing, look to this to see if the menu should\n  // be opened, or only focus.\n  // When an item is selected, it also triggers handleClickOutside and since the selected item is\n  // already out of the menu (DOM), it will not recognize it as a subnode and triggers handleBlur\n  // that sets isOpen to false. That's a faulty logic causing visible problems when\n  // closeOnSelect is false. This flag helps to detect that selection was just made.\n  // the select components can accept an array of options or an object where properties are optgroups\n  // and values are arrays of options. this class property is constructed and updated in a normalized\n  // shape where optgroup titles are stored on the option in the __optgroup field.\n  // id generated for the listbox. used by screenreaders to associate the input with the menu it controls\n\n\n  function Select(props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"anchor\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"dropdown\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"input\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"dragging\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"focusAfterClear\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"openAfterFocus\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"justSelected\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"options\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"listboxId\", getBuiId());\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      activeDescendant: null,\n      inputValue: '',\n      isFocused: false,\n      isOpen: _this.props.startOpen,\n      isPseudoFocused: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isMounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchOutside\", function (event) {\n      if (containsNode(_this.dropdown.current, event.target)) return;\n\n      if (!containsNode(_this.anchor.current, event.target)) {\n        _this.closeMenu();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchMove\", function () {\n      return _this.dragging = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchStart\", function () {\n      return _this.dragging = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchEnd\", function (event) {\n      if (_this.dragging) return;\n\n      _this.handleClick(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchEndClearValue\", function (event) {\n      if (_this.dragging) return;\n\n      _this.clearValue(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function (event) {\n      if (_this.props.disabled || !isClick(event) && !isLeftClick(event)) {\n        return;\n      } // Case comes up when text has been typed into the input field. If no text provided,\n      // the 'input' element will have essentially 0 width therefore will not be clickable.\n      // When click outside does not reset input, text provided will stay rendered after clicks away\n      // from the select component. Upon subsequent clicks on the provided text, open the dropdown\n      // menu, in addition to text edit operations.\n\n\n      if (event.target === _this.input) {\n        // CHASE: not sure why this condition is here. I cannot replicate a situation where clicks\n        // on provided text break into here.\n        if (!_this.state.isFocused) {\n          _this.openAfterFocus = _this.props.openOnClick;\n\n          _this.focus();\n\n          return;\n        }\n\n        if (!_this.state.isOpen) {\n          _this.setState({\n            isOpen: true,\n            isPseudoFocused: false\n          });\n\n          return;\n        }\n      } // Ensures that interactive elements within the Select component do not trigger the outer click\n      // handler. For example, after an option is selected clicks on the 'clear' icon call here. We\n      // should ignore those events. This comes after case where click is on input element, so that\n      // those are handled on their own.\n\n\n      if (_this.input && isInteractive(event.target, _this.input)) {\n        return;\n      } // For the simple case where clicking on the Select does not allow for providing\n      // text input to filter the dropdown options.\n\n\n      if (!_this.props.searchable) {\n        _this.focus();\n\n        _this.setState(function (prev) {\n          return {\n            isOpen: !prev.isOpen\n          };\n        });\n\n        return;\n      } // Cases below only apply to searchable Select component.\n\n\n      if (_this.state.isFocused) {\n        // iOS ignores programmatic calls to input.focus() that were not triggered by a click event.\n        // This component can get into a state where isFocused is true, but the DOM node is not\n        // focused. Call focus here again to ensure.\n        _this.focus(); // Case comes up when click outside does not reset input - once text has been provided to\n        // the input, and the user closes the dropdown menu the provided text is maintained. After\n        // this, if the user focuses back into the select component then clicks on the component,\n        // the provided text highlights rather than position's the cursor at the end of the input.\n\n\n        if (_this.input) _this.input.value = '';\n\n        _this.setState(function (prev) {\n          return {\n            isOpen: !_this.focusAfterClear && !prev.isOpen,\n            isPseudoFocused: false\n          };\n        });\n\n        _this.focusAfterClear = false;\n      } else {\n        _this.openAfterFocus = _this.props.openOnClick;\n\n        _this.focus();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInputFocus\", function (event) {\n      if (_this.props.disabled) return;\n      if (_this.props.onFocus) _this.props.onFocus(event);\n      var toOpen = _this.state.isOpen || _this.openAfterFocus; // if focus happens after clear values, don't open dropdown yet.\n\n      toOpen = !_this.focusAfterClear && toOpen;\n\n      _this.setState({\n        isFocused: true,\n        isOpen: !!toOpen\n      });\n\n      _this.focusAfterClear = false;\n      _this.openAfterFocus = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBlur\", function (event) {\n      if (event.relatedTarget) {\n        if (containsNode(_this.anchor.current, event.relatedTarget) || containsNode(_this.dropdown.current, event.relatedTarget)) {\n          return;\n        }\n      } else {\n        if (containsNode(_this.anchor.current, event.target)) {\n          return;\n        }\n      }\n\n      if (_this.props.onBlur) {\n        _this.props.onBlur(event);\n      }\n\n      if (_this.isMounted) {\n        _this.setState({\n          isFocused: false,\n          isOpen: false,\n          isPseudoFocused: false,\n          inputValue: _this.props.onBlurResetsInput ? '' : _this.state.inputValue\n        });\n      }\n\n      if (typeof document !== 'undefined') {\n        document.removeEventListener('click', _this.handleClickOutside);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClickOutside\", function (event) {\n      if (_this.justSelected) {\n        _this.justSelected = false;\n        return;\n      }\n\n      if (containsNode(_this.dropdown.current, event.target)) return;\n      var isFocused = _this.state.isFocused || _this.state.isPseudoFocused;\n\n      if (isFocused && !containsNode(_this.anchor.current, event.target)) {\n        _this.handleBlur(event);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInputChange\", function (event) {\n      var newInputValue = event.target.value;\n\n      _this.setState({\n        inputValue: newInputValue,\n        isOpen: true,\n        isPseudoFocused: false\n      });\n\n      if (_this.props.onInputChange) {\n        _this.props.onInputChange(event);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleKeyDown\", function (event) {\n      if (_this.props.disabled) return;\n\n      switch (event.keyCode) {\n        case 8:\n          // backspace\n          if (!_this.state.inputValue && _this.props.backspaceRemoves) {\n            event.preventDefault();\n\n            _this.backspaceValue();\n          }\n\n          break;\n\n        case 13:\n          // enter\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 9:\n          // tab\n          _this.setState(function (prevState) {\n            return {\n              isPseudoFocused: false,\n              isFocused: false,\n              isOpen: false,\n              inputValue: !_this.props.onCloseResetsInput || !_this.props.onBlurResetsInput ? prevState.inputValue : ''\n            };\n          });\n\n          break;\n\n        case 27:\n          // escape\n          if (!_this.state.isOpen && _this.props.clearable && _this.props.escapeClearsValue) {\n            _this.clearValue(event);\n\n            _this.setState({\n              isFocused: false,\n              isPseudoFocused: false\n            });\n          }\n\n          break;\n\n        case 32:\n          // space\n          if (_this.props.searchable) {\n            break;\n          }\n\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 38:\n          // up\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 40:\n          // down\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 33:\n          // page up\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 34:\n          // page down\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 35:\n          // end key\n          if (event.shiftKey) {\n            break;\n          }\n\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 36:\n          // home key\n          if (event.shiftKey) {\n            break;\n          }\n\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 46:\n          // delete\n          if (!_this.state.inputValue && _this.props.deleteRemoves) {\n            event.preventDefault();\n\n            _this.popValue();\n          }\n\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getOptionLabel\", function (locale, _ref) {\n      var option = _ref.option;\n      return option.isCreatable ? \"\".concat(locale.select.create, \" \\u201C\").concat(option[_this.props.labelKey], \"\\u201D\") : option[_this.props.labelKey];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getValueLabel\", function (_ref2) {\n      var option = _ref2.option;\n      return option[_this.props.labelKey];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleActiveDescendantChange\", function (id) {\n      if (id) {\n        _this.setState({\n          activeDescendant: id\n        });\n      } else {\n        _this.setState({\n          activeDescendant: null\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectValue\", function (_ref3) {\n      var item = _ref3.item;\n\n      if (item.disabled) {\n        return;\n      }\n\n      _this.justSelected = true; // NOTE: we add/set the value in a callback to make sure the\n      // input value is empty to avoid styling issues in Chrome\n\n      var updatedValue = _this.props.onSelectResetsInput ? '' : _this.state.inputValue;\n\n      if (_this.props.multi) {\n        _this.setState({\n          inputValue: updatedValue,\n          isOpen: !_this.props.closeOnSelect\n        }, function () {\n          var valueArray = _this.props.value;\n\n          if (valueArray.some(function (i) {\n            return i[_this.props.valueKey] === item[_this.props.valueKey];\n          })) {\n            _this.removeValue(item);\n          } else {\n            _this.addValue(item);\n          }\n        });\n      } else {\n        _this.focus();\n\n        _this.setState({\n          inputValue: updatedValue,\n          isOpen: !_this.props.closeOnSelect,\n          isFocused: true,\n          isPseudoFocused: false\n        }, function () {\n          _this.setValue([item], item, STATE_CHANGE_TYPE.select);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addValue\", function (item) {\n      var valueArray = _toConsumableArray(_this.props.value);\n\n      _this.setValue(valueArray.concat(item), item, STATE_CHANGE_TYPE.select);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"backspaceValue\", function () {\n      var item = _this.popValue();\n\n      if (!item) {\n        return;\n      }\n\n      var valueLength = _this.props.value.length;\n      var renderLabel = _this.props.getValueLabel || _this.getValueLabel;\n      var labelForInput = renderLabel({\n        option: item,\n        index: valueLength - 1\n      }); // label might not be a string, it might be a Node of another kind.\n\n      if (typeof labelForInput === 'string') {\n        var remainingInput = labelForInput.slice(0, -1);\n\n        _this.setState({\n          inputValue: remainingInput,\n          isOpen: true\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"popValue\", function () {\n      var valueArray = _toConsumableArray(_this.props.value);\n\n      var valueLength = valueArray.length;\n      if (!valueLength) return;\n      if (valueArray[valueLength - 1].clearableValue === false) return;\n      var item = valueArray.pop();\n\n      _this.setValue(valueArray, item, STATE_CHANGE_TYPE.remove);\n\n      return item;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeValue\", function (item) {\n      var valueArray = _toConsumableArray(_this.props.value);\n\n      _this.setValue(valueArray.filter(function (i) {\n        return i[_this.props.valueKey] !== item[_this.props.valueKey];\n      }), item, STATE_CHANGE_TYPE.remove);\n\n      _this.focus();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearValue\", function (event) {\n      if (isClick(event) && !isLeftClick(event)) return;\n\n      if (_this.props.value) {\n        var resetValue = _this.props.value.filter(function (item) {\n          return item.clearableValue === false;\n        });\n\n        _this.setValue(resetValue, null, STATE_CHANGE_TYPE.clear);\n      }\n\n      _this.setState({\n        inputValue: '',\n        isOpen: false\n      });\n\n      _this.focus();\n\n      _this.focusAfterClear = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"shouldShowPlaceholder\", function () {\n      return !(_this.state.inputValue || _this.props.value && _this.props.value.length);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"shouldShowValue\", function () {\n      return !_this.state.inputValue;\n    });\n\n    _this.options = normalizeOptions(props.options);\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.autoFocus) {\n        this.focus();\n      }\n\n      this.isMounted = true;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (typeof document !== 'undefined') {\n        if (prevState.isOpen !== this.state.isOpen) {\n          if (this.state.isOpen) {\n            this.props.onOpen && this.props.onOpen();\n            document.addEventListener('touchstart', this.handleTouchOutside);\n          } else {\n            this.props.onClose && this.props.onClose();\n            document.removeEventListener('touchstart', this.handleTouchOutside);\n          }\n        }\n\n        if (!prevState.isFocused && this.state.isFocused) {\n          document.addEventListener('click', this.handleClickOutside);\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof document !== 'undefined') {\n        document.removeEventListener('touchstart', this.handleTouchOutside);\n      }\n\n      this.isMounted = false;\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (!this.input) return;\n      this.input.focus();\n    } // Handle touch outside on mobile to dismiss menu, ensures that the\n    // touch target is not within the anchor DOM node.\n\n  }, {\n    key: \"closeMenu\",\n    value: function closeMenu() {\n      if (this.props.onCloseResetsInput) {\n        this.setState({\n          inputValue: '',\n          isOpen: false,\n          isPseudoFocused: this.state.isFocused && !this.props.multi\n        });\n      } else {\n        this.setState({\n          isOpen: false,\n          isPseudoFocused: this.state.isFocused && !this.props.multi\n        });\n      }\n    }\n  }, {\n    key: \"getValueArray\",\n\n    /**\n     * Extends the value into an array from the given options\n     */\n    value: function getValueArray(value) {\n      var _this2 = this;\n\n      if (!Array.isArray(value)) {\n        if (value === null || value === undefined) return [];\n        value = [value];\n      }\n\n      return value.map(function (value) {\n        return expandValue(value, _this2.props);\n      });\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value, option, type) {\n      if (this.props.onChange) {\n        this.props.onChange({\n          value: value,\n          option: option,\n          type: type\n        });\n      }\n    }\n  }, {\n    key: \"renderLoading\",\n    value: function renderLoading() {\n      if (!this.props.isLoading) return;\n      var sharedProps = this.getSharedProps();\n      var _this$props$overrides = this.props.overrides,\n          overrides = _this$props$overrides === void 0 ? {} : _this$props$overrides;\n\n      var _getOverrides = getOverrides(overrides.LoadingIndicator, Spinner),\n          _getOverrides2 = _slicedToArray(_getOverrides, 2),\n          LoadingIndicator = _getOverrides2[0],\n          loadingIndicatorProps = _getOverrides2[1];\n\n      return React.createElement(LoadingIndicator, _extends({\n        size: 16,\n        overrides: {\n          Svg: {\n            style: getLoadingIconStyles\n          }\n        },\n        $silenceV10DeprecationWarning: true\n      }, sharedProps, loadingIndicatorProps));\n    }\n  }, {\n    key: \"renderValue\",\n    value: function renderValue(valueArray, isOpen, locale) {\n      var _this3 = this;\n\n      var _this$props$overrides2 = this.props.overrides,\n          overrides = _this$props$overrides2 === void 0 ? {} : _this$props$overrides2;\n      var sharedProps = this.getSharedProps();\n      var renderLabel = this.props.getValueLabel || this.getValueLabel;\n      var Value = this.props.valueComponent || Noop;\n\n      if (!valueArray.length) {\n        return null;\n      }\n\n      if (this.props.multi) {\n        return valueArray.map(function (value, i) {\n          var disabled = sharedProps.$disabled || value.clearableValue === false;\n          return React.createElement(Value, _extends({\n            value: value,\n            key: \"value-\".concat(i, \"-\").concat(value[_this3.props.valueKey]),\n            removeValue: function removeValue() {\n              return _this3.removeValue(value);\n            },\n            disabled: disabled,\n            overrides: {\n              MultiValue: overrides.MultiValue\n            }\n          }, sharedProps, {\n            $disabled: disabled\n          }), renderLabel({\n            option: value,\n            index: i\n          }));\n        });\n      } else if (this.shouldShowValue()) {\n        return React.createElement(Value, _extends({\n          value: valueArray[0][this.props.valueKey],\n          disabled: this.props.disabled,\n          overrides: {\n            SingleValue: overrides.SingleValue\n          }\n        }, sharedProps), renderLabel({\n          option: valueArray[0]\n        }));\n      }\n    }\n  }, {\n    key: \"renderInput\",\n    value: function renderInput() {\n      var _this4 = this;\n\n      var _this$props$overrides3 = this.props.overrides,\n          overrides = _this$props$overrides3 === void 0 ? {} : _this$props$overrides3;\n\n      var _getOverrides3 = getOverrides(overrides.InputContainer, StyledInputContainer),\n          _getOverrides4 = _slicedToArray(_getOverrides3, 2),\n          InputContainer = _getOverrides4[0],\n          inputContainerProps = _getOverrides4[1];\n\n      var sharedProps = this.getSharedProps();\n      var isOpen = this.state.isOpen;\n      var selected = this.getValueArray(this.props.value).map(function (v) {\n        return v[_this4.props.labelKey];\n      }).join(', ');\n      var selectedLabel = selected.length ? \"Selected \".concat(selected, \". \") : '';\n      var label = \"\".concat(selectedLabel).concat(this.props['aria-label'] || '');\n\n      if (!this.props.searchable) {\n        return React.createElement(InputContainer, _extends({\n          \"aria-activedescendant\": this.state.activeDescendant,\n          \"aria-expanded\": isOpen,\n          \"aria-disabled\": this.props.disabled,\n          \"aria-label\": label,\n          \"aria-labelledby\": this.props['aria-labelledby'],\n          \"aria-owns\": this.state.isOpen ? this.listboxId : null,\n          \"aria-required\": this.props.required || null,\n          onFocus: this.handleInputFocus,\n          ref: function ref(_ref4) {\n            return _this4.input = _ref4;\n          },\n          tabIndex: 0\n        }, sharedProps, inputContainerProps));\n      }\n\n      return React.createElement(InputContainer, _extends({}, sharedProps, inputContainerProps), React.createElement(AutosizeInput, _extends({\n        \"aria-activedescendant\": this.state.activeDescendant,\n        \"aria-autocomplete\": \"list\",\n        \"aria-controls\": this.state.isOpen ? this.listboxId : null,\n        \"aria-describedby\": this.props['aria-describedby'],\n        \"aria-errormessage\": this.props['aria-errormessage'],\n        \"aria-disabled\": this.props.disabled || null,\n        \"aria-expanded\": isOpen,\n        \"aria-haspopup\": \"listbox\",\n        \"aria-label\": label,\n        \"aria-labelledby\": this.props['aria-labelledby'],\n        \"aria-required\": this.props.required || null,\n        disabled: this.props.disabled || null,\n        id: this.props.id || null,\n        inputRef: function inputRef(ref) {\n          return _this4.input = ref;\n        },\n        onChange: this.handleInputChange,\n        onFocus: this.handleInputFocus,\n        overrides: {\n          Input: overrides.Input\n        },\n        required: this.props.required && !this.props.value.length || null,\n        role: \"combobox\",\n        value: this.state.inputValue,\n        tabIndex: 0\n      }, sharedProps)));\n    }\n  }, {\n    key: \"renderClear\",\n    value: function renderClear() {\n      var isValueEntered = Boolean(this.props.value && this.props.value.length || this.state.inputValue);\n\n      if (!this.props.clearable || this.props.disabled || this.props.isLoading || !isValueEntered) {\n        return;\n      }\n\n      var sharedProps = this.getSharedProps();\n      var _this$props$overrides4 = this.props.overrides,\n          overrides = _this$props$overrides4 === void 0 ? {} : _this$props$overrides4;\n\n      var _getOverrides5 = getOverrides(overrides.ClearIcon, DeleteAlt),\n          _getOverrides6 = _slicedToArray(_getOverrides5, 2),\n          ClearIcon = _getOverrides6[0],\n          clearIconProps = _getOverrides6[1];\n\n      var ariaLabel = this.props.multi ? 'Clear all' : 'Clear value';\n      return React.createElement(ClearIcon, _extends({\n        size: 16,\n        title: ariaLabel,\n        \"aria-label\": ariaLabel,\n        onClick: this.clearValue,\n        onTouchEnd: this.handleTouchEndClearValue,\n        onTouchMove: this.handleTouchMove,\n        onTouchStart: this.handleTouchStart,\n        role: \"button\",\n        overrides: {\n          Svg: {\n            component: StyledClearIcon,\n            props: overrides.ClearIcon && overrides.ClearIcon.props ? overrides.ClearIcon.props : {},\n            style: overrides.ClearIcon && overrides.ClearIcon.style ? overrides.ClearIcon.style : {}\n          }\n        }\n      }, sharedProps, clearIconProps));\n    }\n  }, {\n    key: \"renderArrow\",\n    value: function renderArrow() {\n      if (this.props.type !== TYPE.select) {\n        return null;\n      }\n\n      var _this$props$overrides5 = this.props.overrides,\n          overrides = _this$props$overrides5 === void 0 ? {} : _this$props$overrides5;\n\n      var _getOverrides7 = getOverrides(overrides.SelectArrow, TriangleDownIcon),\n          _getOverrides8 = _slicedToArray(_getOverrides7, 2),\n          SelectArrow = _getOverrides8[0],\n          selectArrowProps = _getOverrides8[1];\n\n      var sharedProps = this.getSharedProps();\n      return React.createElement(SelectArrow, _extends({\n        size: 16,\n        title: 'open',\n        overrides: {\n          Svg: {\n            component: StyledSelectArrow,\n            props: overrides.SelectArrow && overrides.SelectArrow.props ? overrides.SelectArrow.props : {},\n            style: overrides.SelectArrow && overrides.SelectArrow.style ? overrides.SelectArrow.style : {}\n          }\n        }\n      }, sharedProps, selectArrowProps));\n    }\n  }, {\n    key: \"renderSearch\",\n    value: function renderSearch() {\n      if (this.props.type !== TYPE.search) {\n        return null;\n      }\n\n      var _this$props$overrides6 = this.props.overrides,\n          overrides = _this$props$overrides6 === void 0 ? {} : _this$props$overrides6;\n\n      var _getOverrides9 = getOverrides(overrides.SearchIconContainer, StyledSearchIconContainer),\n          _getOverrides10 = _slicedToArray(_getOverrides9, 2),\n          SearchIconContainer = _getOverrides10[0],\n          searchIconContainerProps = _getOverrides10[1];\n\n      var _getOverrides11 = getOverrides(overrides.SearchIcon, SearchIconComponent),\n          _getOverrides12 = _slicedToArray(_getOverrides11, 2),\n          SearchIcon = _getOverrides12[0],\n          searchIconProps = _getOverrides12[1];\n\n      var sharedProps = this.getSharedProps();\n      return (// TODO(v10): remove searchIconProps from SearchIconContainer\n        React.createElement(SearchIconContainer, _extends({}, sharedProps, searchIconProps, searchIconContainerProps), React.createElement(SearchIcon, _extends({\n          size: 16,\n          title: 'search'\n        }, searchIconProps)))\n      );\n    }\n  }, {\n    key: \"filterOptions\",\n    value: function filterOptions(excludeOptions) {\n      var _this5 = this;\n\n      var filterValue = this.state.inputValue; // apply filter function\n\n      if (this.props.filterOptions) {\n        this.options = this.props.filterOptions(this.options, filterValue, excludeOptions, {\n          valueKey: this.props.valueKey,\n          labelKey: this.props.labelKey\n        });\n      } // can user create a new option + there's no exact match already\n\n\n      if (filterValue && this.props.creatable && this.options.concat(this.props.value).every(function (opt) {\n        return opt[_this5.props.labelKey].toLowerCase() !== filterValue.toLowerCase().trim();\n      })) {\n        var _this$options$push; // $FlowFixMe - this.options is typed as a read-only array\n\n\n        this.options.push((_this$options$push = {\n          id: filterValue\n        }, _defineProperty(_this$options$push, this.props.labelKey, filterValue), _defineProperty(_this$options$push, this.props.valueKey, filterValue), _defineProperty(_this$options$push, \"isCreatable\", true), _this$options$push));\n      }\n\n      return this.options;\n    }\n  }, {\n    key: \"getSharedProps\",\n    value: function getSharedProps() {\n      var _this$props = this.props,\n          clearable = _this$props.clearable,\n          creatable = _this$props.creatable,\n          disabled = _this$props.disabled,\n          error = _this$props.error,\n          positive = _this$props.positive,\n          isLoading = _this$props.isLoading,\n          multi = _this$props.multi,\n          required = _this$props.required,\n          size = _this$props.size,\n          searchable = _this$props.searchable,\n          type = _this$props.type,\n          value = _this$props.value;\n      var _this$state = this.state,\n          isOpen = _this$state.isOpen,\n          isFocused = _this$state.isFocused,\n          isPseudoFocused = _this$state.isPseudoFocused;\n      return {\n        $clearable: clearable,\n        $creatable: creatable,\n        $disabled: disabled,\n        $error: error,\n        $positive: positive,\n        $isFocused: isFocused,\n        $isLoading: isLoading,\n        $isOpen: isOpen,\n        $isPseudoFocused: isPseudoFocused,\n        $multi: multi,\n        $required: required,\n        $searchable: searchable,\n        $size: size,\n        $type: type,\n        $isEmpty: !this.getValueArray(value).length\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      this.options = normalizeOptions(this.props.options);\n      var _this$props2 = this.props,\n          _this$props2$override = _this$props2.overrides,\n          overrides = _this$props2$override === void 0 ? {} : _this$props2$override,\n          type = _this$props2.type,\n          multi = _this$props2.multi,\n          noResultsMsg = _this$props2.noResultsMsg,\n          value = _this$props2.value,\n          filterOutSelected = _this$props2.filterOutSelected;\n\n      if (process.env.NODE_ENV !== \"production\") {\n        // value may be nullish, only warn if value is defined\n        if (value && !Array.isArray(value)) {\n          console.warn('The Select component expects an array as the value prop. For more information, please visit the docs at https://baseweb.design/components/select/');\n        }\n      }\n\n      var _getOverrides13 = getOverrides(overrides.Root, StyledRoot),\n          _getOverrides14 = _slicedToArray(_getOverrides13, 2),\n          Root = _getOverrides14[0],\n          rootProps = _getOverrides14[1];\n\n      var _getOverrides15 = getOverrides(overrides.ControlContainer, StyledControlContainer),\n          _getOverrides16 = _slicedToArray(_getOverrides15, 2),\n          ControlContainer = _getOverrides16[0],\n          controlContainerProps = _getOverrides16[1];\n\n      var _getOverrides17 = getOverrides(overrides.ValueContainer, StyledValueContainer),\n          _getOverrides18 = _slicedToArray(_getOverrides17, 2),\n          ValueContainer = _getOverrides18[0],\n          valueContainerProps = _getOverrides18[1];\n\n      var _getOverrides19 = getOverrides(overrides.IconsContainer, StyledIconsContainer),\n          _getOverrides20 = _slicedToArray(_getOverrides19, 2),\n          IconsContainer = _getOverrides20[0],\n          iconsContainerProps = _getOverrides20[1];\n\n      var _getOverrides21 = getOverrides(overrides.Popover, Popover),\n          _getOverrides22 = _slicedToArray(_getOverrides21, 2),\n          PopoverOverride = _getOverrides22[0],\n          popoverProps = _getOverrides22[1];\n\n      var _getOverrides23 = getOverrides(overrides.Placeholder, StyledPlaceholder),\n          _getOverrides24 = _slicedToArray(_getOverrides23, 2),\n          Placeholder = _getOverrides24[0],\n          placeholderProps = _getOverrides24[1];\n\n      var sharedProps = this.getSharedProps();\n      var valueArray = this.getValueArray(value);\n      var options = this.filterOptions(multi && filterOutSelected ? valueArray : null);\n      var isOpen = this.state.isOpen;\n      sharedProps.$isOpen = isOpen;\n\n      if (process.env.NODE_ENV !== \"production\") {\n        if (this.props.error && this.props.positive) {\n          // eslint-disable-next-line no-console\n          console.warn(\"[Select] `error` and `positive` are both set to `true`. `error` will take precedence but this may not be what you want.\");\n        }\n      }\n\n      return React.createElement(LocaleContext.Consumer, null, function (locale) {\n        return React.createElement(PopoverOverride // Popover does not provide ability to forward refs through, and if we were to simply\n        // apply the ref to the Root component below it would be overwritten before the popover\n        // renders it. Using this strategy, we will get a ref to the popover, then reuse its\n        // anchorRef so we can check if clicks are on the select component or not.\n        // eslint-disable-next-line flowtype/no-weak-types\n        , _extends({\n          ref: function ref(_ref5) {\n            if (!_ref5) return;\n            _this6.anchor = _ref5.anchorRef;\n          },\n          focusLock: false,\n          mountNode: _this6.props.mountNode,\n          onEsc: function onEsc() {\n            return _this6.closeMenu();\n          },\n          isOpen: isOpen,\n          content: function content() {\n            var dropdownProps = {\n              error: _this6.props.error,\n              positive: _this6.props.positive,\n              getOptionLabel: _this6.props.getOptionLabel || _this6.getOptionLabel.bind(_this6, locale),\n              id: _this6.listboxId,\n              isLoading: _this6.props.isLoading,\n              labelKey: _this6.props.labelKey,\n              maxDropdownHeight: _this6.props.maxDropdownHeight,\n              multi: multi,\n              noResultsMsg: noResultsMsg,\n              onActiveDescendantChange: _this6.handleActiveDescendantChange,\n              onItemSelect: _this6.selectValue,\n              options: options,\n              overrides: overrides,\n              required: _this6.props.required,\n              searchable: _this6.props.searchable,\n              size: _this6.props.size,\n              type: type,\n              value: valueArray,\n              valueKey: _this6.props.valueKey,\n              width: _this6.anchor.current ? _this6.anchor.current.clientWidth : null\n            };\n            return React.createElement(SelectDropdown, _extends({\n              innerRef: _this6.dropdown\n            }, dropdownProps));\n          },\n          placement: PLACEMENT.bottom\n        }, popoverProps), React.createElement(Root, _extends({\n          onBlur: _this6.handleBlur,\n          \"data-baseweb\": \"select\"\n        }, sharedProps, rootProps), React.createElement(ControlContainer, _extends({\n          onKeyDown: _this6.handleKeyDown,\n          onClick: _this6.handleClick,\n          onTouchEnd: _this6.handleTouchEnd,\n          onTouchMove: _this6.handleTouchMove,\n          onTouchStart: _this6.handleTouchStart\n        }, sharedProps, controlContainerProps), type === TYPE.search ? _this6.renderSearch() : null, React.createElement(ValueContainer, _extends({}, sharedProps, valueContainerProps), _this6.renderValue(valueArray, isOpen, locale), _this6.renderInput(), _this6.shouldShowPlaceholder() ? React.createElement(Placeholder, _extends({}, sharedProps, placeholderProps), typeof _this6.props.placeholder !== 'undefined' ? _this6.props.placeholder : locale.select.placeholder) : null), React.createElement(IconsContainer, _extends({}, sharedProps, iconsContainerProps), _this6.renderLoading(), _this6.renderClear(), type === TYPE.select ? _this6.renderArrow() : null))));\n      });\n    }\n  }]);\n\n  return Select;\n}(React.Component);\n\n_defineProperty(Select, \"defaultProps\", defaultProps);\n\nexport default Select;","map":{"version":3,"sources":["/home/zhiguangda/ITS/deckgl/node_modules/baseui/esm/select/select-component.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","toString","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","err","Array","isArray","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","from","arr2","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","_setPrototypeOf","p","_defineProperty","React","getOverrides","DeleteAlt","TriangleDownIcon","SearchIconComponent","LocaleContext","Popover","PLACEMENT","Spinner","getBuiId","AutosizeInput","TYPE","STATE_CHANGE_TYPE","defaultProps","SelectDropdown","StyledRoot","StyledControlContainer","StyledPlaceholder","StyledValueContainer","StyledInputContainer","StyledIconsContainer","StyledSelectArrow","StyledClearIcon","getLoadingIconStyles","StyledSearchIconContainer","expandValue","normalizeOptions","Noop","isClick","event","type","isLeftClick","button","containsNode","parent","child","document","contains","isInteractive","rootTarget","rootElement","Element","role","getAttribute","tagName","parentElement","Select","_React$Component","_this","createRef","activeDescendant","inputValue","isFocused","isOpen","startOpen","isPseudoFocused","dropdown","current","anchor","closeMenu","dragging","handleClick","clearValue","disabled","input","state","openAfterFocus","openOnClick","focus","setState","searchable","prev","focusAfterClear","onFocus","toOpen","relatedTarget","onBlur","isMounted","onBlurResetsInput","removeEventListener","handleClickOutside","justSelected","handleBlur","newInputValue","onInputChange","keyCode","backspaceRemoves","preventDefault","backspaceValue","stopPropagation","prevState","onCloseResetsInput","clearable","escapeClearsValue","shiftKey","deleteRemoves","popValue","locale","_ref","option","isCreatable","concat","select","labelKey","_ref2","id","_ref3","item","updatedValue","onSelectResetsInput","multi","closeOnSelect","valueArray","some","valueKey","removeValue","addValue","setValue","valueLength","renderLabel","getValueLabel","labelForInput","index","remainingInput","slice","clearableValue","pop","remove","filter","resetValue","clear","options","componentDidMount","autoFocus","componentDidUpdate","prevProps","onOpen","addEventListener","handleTouchOutside","onClose","componentWillUnmount","getValueArray","_this2","map","onChange","renderLoading","isLoading","sharedProps","getSharedProps","_this$props$overrides","overrides","_getOverrides","LoadingIndicator","_getOverrides2","loadingIndicatorProps","createElement","size","Svg","style","$silenceV10DeprecationWarning","renderValue","_this3","_this$props$overrides2","Value","valueComponent","$disabled","MultiValue","shouldShowValue","SingleValue","renderInput","_this4","_this$props$overrides3","_getOverrides3","InputContainer","_getOverrides4","inputContainerProps","selected","v","join","selectedLabel","label","listboxId","required","handleInputFocus","ref","_ref4","tabIndex","inputRef","handleInputChange","Input","renderClear","isValueEntered","Boolean","_this$props$overrides4","_getOverrides5","ClearIcon","_getOverrides6","clearIconProps","ariaLabel","title","onClick","onTouchEnd","handleTouchEndClearValue","onTouchMove","handleTouchMove","onTouchStart","handleTouchStart","component","renderArrow","_this$props$overrides5","_getOverrides7","SelectArrow","_getOverrides8","selectArrowProps","renderSearch","search","_this$props$overrides6","_getOverrides9","SearchIconContainer","_getOverrides10","searchIconContainerProps","_getOverrides11","SearchIcon","_getOverrides12","searchIconProps","filterOptions","excludeOptions","_this5","filterValue","creatable","every","opt","toLowerCase","trim","_this$options$push","_this$props","error","positive","_this$state","$clearable","$creatable","$error","$positive","$isFocused","$isLoading","$isOpen","$isPseudoFocused","$multi","$required","$searchable","$size","$type","$isEmpty","render","_this6","_this$props2","_this$props2$override","noResultsMsg","filterOutSelected","process","env","NODE_ENV","console","warn","_getOverrides13","Root","_getOverrides14","rootProps","_getOverrides15","ControlContainer","_getOverrides16","controlContainerProps","_getOverrides17","ValueContainer","_getOverrides18","valueContainerProps","_getOverrides19","IconsContainer","_getOverrides20","iconsContainerProps","_getOverrides21","_getOverrides22","PopoverOverride","popoverProps","_getOverrides23","Placeholder","_getOverrides24","placeholderProps","Consumer","_ref5","anchorRef","focusLock","mountNode","onEsc","content","dropdownProps","getOptionLabel","bind","maxDropdownHeight","onActiveDescendantChange","handleActiveDescendantChange","onItemSelect","selectValue","width","clientWidth","innerRef","placement","bottom","onKeyDown","handleKeyDown","handleTouchEnd","shouldShowPlaceholder","placeholder","Component"],"mappings":"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","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\nCopyright (c) 2018-2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport * as React from 'react';\nimport { getOverrides } from '../helpers/overrides.js';\nimport DeleteAlt from '../icon/delete-alt.js';\nimport TriangleDownIcon from '../icon/triangle-down.js';\nimport SearchIconComponent from '../icon/search.js';\nimport { LocaleContext } from '../locale/index.js';\nimport { Popover, PLACEMENT } from '../popover/index.js';\nimport { Spinner } from '../spinner/index.js';\nimport getBuiId from '../utils/get-bui-id.js';\nimport AutosizeInput from './autosize-input.js';\nimport { TYPE, STATE_CHANGE_TYPE } from './constants.js';\nimport defaultProps from './default-props.js';\nimport SelectDropdown from './dropdown.js';\nimport { StyledRoot, StyledControlContainer, StyledPlaceholder, StyledValueContainer, StyledInputContainer, StyledIconsContainer, StyledSelectArrow, StyledClearIcon, getLoadingIconStyles, StyledSearchIconContainer } from './styled-components.js';\nimport { expandValue, normalizeOptions } from './utils/index.js';\n\nfunction Noop() {\n  return null;\n}\n\nvar isClick = function isClick(event) {\n  return event.type === 'click';\n};\n\nvar isLeftClick = function isLeftClick(event) {\n  return event.button !== null && event.button !== undefined && event.button === 0;\n};\n\nvar containsNode = function containsNode(parent, child) {\n  if (typeof document !== 'undefined') {\n    // eslint-disable-next-line flowtype/no-weak-types\n    return child && parent && parent.contains(child);\n  }\n};\n\nexport function isInteractive(rootTarget, rootElement) {\n  if (rootTarget instanceof Element) {\n    var target = rootTarget;\n\n    while (target && target !== rootElement) {\n      var role = target.getAttribute('role');\n\n      if (role === 'button' || role === 'link') {\n        return true;\n      }\n\n      if (target.tagName) target = target.parentElement;\n    }\n  }\n\n  return false;\n} // eslint-disable-next-line flowtype/no-weak-types\n\nvar Select =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Select, _React$Component);\n\n  // anchor is a ref that refers to the outermost element rendered when the dropdown menu is not\n  // open. This is required so that we can check if clicks are on/off the anchor element.\n  // dropdown is a ref that refers to the popover element. This is required so that we can check if\n  // clicks are on/off the dropdown element.\n  // dragging is a flag to track whether a mobile device is currently scrolling versus clicking.\n  // focusAfterClear is a flag to indicate that the dropdowm menu should open after a selected\n  // option has been cleared.\n  // openAfterFocus is a flag to indicate that the dropdown menu should open when the component is\n  // focused. Developers have the option to disable initial clicks opening the dropdown menu. If not\n  // disabled, clicks will set this flag to true. Upon focusing, look to this to see if the menu should\n  // be opened, or only focus.\n  // When an item is selected, it also triggers handleClickOutside and since the selected item is\n  // already out of the menu (DOM), it will not recognize it as a subnode and triggers handleBlur\n  // that sets isOpen to false. That's a faulty logic causing visible problems when\n  // closeOnSelect is false. This flag helps to detect that selection was just made.\n  // the select components can accept an array of options or an object where properties are optgroups\n  // and values are arrays of options. this class property is constructed and updated in a normalized\n  // shape where optgroup titles are stored on the option in the __optgroup field.\n  // id generated for the listbox. used by screenreaders to associate the input with the menu it controls\n  function Select(props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"anchor\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"dropdown\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"input\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"dragging\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"focusAfterClear\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"openAfterFocus\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"justSelected\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"options\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"listboxId\", getBuiId());\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      activeDescendant: null,\n      inputValue: '',\n      isFocused: false,\n      isOpen: _this.props.startOpen,\n      isPseudoFocused: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isMounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchOutside\", function (event) {\n      if (containsNode(_this.dropdown.current, event.target)) return;\n\n      if (!containsNode(_this.anchor.current, event.target)) {\n        _this.closeMenu();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchMove\", function () {\n      return _this.dragging = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchStart\", function () {\n      return _this.dragging = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchEnd\", function (event) {\n      if (_this.dragging) return;\n\n      _this.handleClick(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchEndClearValue\", function (event) {\n      if (_this.dragging) return;\n\n      _this.clearValue(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function (event) {\n      if (_this.props.disabled || !isClick(event) && !isLeftClick(event)) {\n        return;\n      } // Case comes up when text has been typed into the input field. If no text provided,\n      // the 'input' element will have essentially 0 width therefore will not be clickable.\n      // When click outside does not reset input, text provided will stay rendered after clicks away\n      // from the select component. Upon subsequent clicks on the provided text, open the dropdown\n      // menu, in addition to text edit operations.\n\n\n      if (event.target === _this.input) {\n        // CHASE: not sure why this condition is here. I cannot replicate a situation where clicks\n        // on provided text break into here.\n        if (!_this.state.isFocused) {\n          _this.openAfterFocus = _this.props.openOnClick;\n\n          _this.focus();\n\n          return;\n        }\n\n        if (!_this.state.isOpen) {\n          _this.setState({\n            isOpen: true,\n            isPseudoFocused: false\n          });\n\n          return;\n        }\n      } // Ensures that interactive elements within the Select component do not trigger the outer click\n      // handler. For example, after an option is selected clicks on the 'clear' icon call here. We\n      // should ignore those events. This comes after case where click is on input element, so that\n      // those are handled on their own.\n\n\n      if (_this.input && isInteractive(event.target, _this.input)) {\n        return;\n      } // For the simple case where clicking on the Select does not allow for providing\n      // text input to filter the dropdown options.\n\n\n      if (!_this.props.searchable) {\n        _this.focus();\n\n        _this.setState(function (prev) {\n          return {\n            isOpen: !prev.isOpen\n          };\n        });\n\n        return;\n      } // Cases below only apply to searchable Select component.\n\n\n      if (_this.state.isFocused) {\n        // iOS ignores programmatic calls to input.focus() that were not triggered by a click event.\n        // This component can get into a state where isFocused is true, but the DOM node is not\n        // focused. Call focus here again to ensure.\n        _this.focus(); // Case comes up when click outside does not reset input - once text has been provided to\n        // the input, and the user closes the dropdown menu the provided text is maintained. After\n        // this, if the user focuses back into the select component then clicks on the component,\n        // the provided text highlights rather than position's the cursor at the end of the input.\n\n\n        if (_this.input) _this.input.value = '';\n\n        _this.setState(function (prev) {\n          return {\n            isOpen: !_this.focusAfterClear && !prev.isOpen,\n            isPseudoFocused: false\n          };\n        });\n\n        _this.focusAfterClear = false;\n      } else {\n        _this.openAfterFocus = _this.props.openOnClick;\n\n        _this.focus();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInputFocus\", function (event) {\n      if (_this.props.disabled) return;\n      if (_this.props.onFocus) _this.props.onFocus(event);\n      var toOpen = _this.state.isOpen || _this.openAfterFocus; // if focus happens after clear values, don't open dropdown yet.\n\n      toOpen = !_this.focusAfterClear && toOpen;\n\n      _this.setState({\n        isFocused: true,\n        isOpen: !!toOpen\n      });\n\n      _this.focusAfterClear = false;\n      _this.openAfterFocus = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBlur\", function (event) {\n      if (event.relatedTarget) {\n        if (containsNode(_this.anchor.current, event.relatedTarget) || containsNode(_this.dropdown.current, event.relatedTarget)) {\n          return;\n        }\n      } else {\n        if (containsNode(_this.anchor.current, event.target)) {\n          return;\n        }\n      }\n\n      if (_this.props.onBlur) {\n        _this.props.onBlur(event);\n      }\n\n      if (_this.isMounted) {\n        _this.setState({\n          isFocused: false,\n          isOpen: false,\n          isPseudoFocused: false,\n          inputValue: _this.props.onBlurResetsInput ? '' : _this.state.inputValue\n        });\n      }\n\n      if (typeof document !== 'undefined') {\n        document.removeEventListener('click', _this.handleClickOutside);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClickOutside\", function (event) {\n      if (_this.justSelected) {\n        _this.justSelected = false;\n        return;\n      }\n\n      if (containsNode(_this.dropdown.current, event.target)) return;\n      var isFocused = _this.state.isFocused || _this.state.isPseudoFocused;\n\n      if (isFocused && !containsNode(_this.anchor.current, event.target)) {\n        _this.handleBlur(event);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInputChange\", function (event) {\n      var newInputValue = event.target.value;\n\n      _this.setState({\n        inputValue: newInputValue,\n        isOpen: true,\n        isPseudoFocused: false\n      });\n\n      if (_this.props.onInputChange) {\n        _this.props.onInputChange(event);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleKeyDown\", function (event) {\n      if (_this.props.disabled) return;\n\n      switch (event.keyCode) {\n        case 8:\n          // backspace\n          if (!_this.state.inputValue && _this.props.backspaceRemoves) {\n            event.preventDefault();\n\n            _this.backspaceValue();\n          }\n\n          break;\n\n        case 13:\n          // enter\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 9:\n          // tab\n          _this.setState(function (prevState) {\n            return {\n              isPseudoFocused: false,\n              isFocused: false,\n              isOpen: false,\n              inputValue: !_this.props.onCloseResetsInput || !_this.props.onBlurResetsInput ? prevState.inputValue : ''\n            };\n          });\n\n          break;\n\n        case 27:\n          // escape\n          if (!_this.state.isOpen && _this.props.clearable && _this.props.escapeClearsValue) {\n            _this.clearValue(event);\n\n            _this.setState({\n              isFocused: false,\n              isPseudoFocused: false\n            });\n          }\n\n          break;\n\n        case 32:\n          // space\n          if (_this.props.searchable) {\n            break;\n          }\n\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 38:\n          // up\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 40:\n          // down\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 33:\n          // page up\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 34:\n          // page down\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 35:\n          // end key\n          if (event.shiftKey) {\n            break;\n          }\n\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 36:\n          // home key\n          if (event.shiftKey) {\n            break;\n          }\n\n          event.preventDefault();\n\n          if (!_this.state.isOpen) {\n            _this.setState({\n              isOpen: true\n            });\n          }\n\n          break;\n\n        case 46:\n          // delete\n          if (!_this.state.inputValue && _this.props.deleteRemoves) {\n            event.preventDefault();\n\n            _this.popValue();\n          }\n\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getOptionLabel\", function (locale, _ref) {\n      var option = _ref.option;\n      return option.isCreatable ? \"\".concat(locale.select.create, \" \\u201C\").concat(option[_this.props.labelKey], \"\\u201D\") : option[_this.props.labelKey];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getValueLabel\", function (_ref2) {\n      var option = _ref2.option;\n      return option[_this.props.labelKey];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleActiveDescendantChange\", function (id) {\n      if (id) {\n        _this.setState({\n          activeDescendant: id\n        });\n      } else {\n        _this.setState({\n          activeDescendant: null\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectValue\", function (_ref3) {\n      var item = _ref3.item;\n\n      if (item.disabled) {\n        return;\n      }\n\n      _this.justSelected = true; // NOTE: we add/set the value in a callback to make sure the\n      // input value is empty to avoid styling issues in Chrome\n\n      var updatedValue = _this.props.onSelectResetsInput ? '' : _this.state.inputValue;\n\n      if (_this.props.multi) {\n        _this.setState({\n          inputValue: updatedValue,\n          isOpen: !_this.props.closeOnSelect\n        }, function () {\n          var valueArray = _this.props.value;\n\n          if (valueArray.some(function (i) {\n            return i[_this.props.valueKey] === item[_this.props.valueKey];\n          })) {\n            _this.removeValue(item);\n          } else {\n            _this.addValue(item);\n          }\n        });\n      } else {\n        _this.focus();\n\n        _this.setState({\n          inputValue: updatedValue,\n          isOpen: !_this.props.closeOnSelect,\n          isFocused: true,\n          isPseudoFocused: false\n        }, function () {\n          _this.setValue([item], item, STATE_CHANGE_TYPE.select);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addValue\", function (item) {\n      var valueArray = _toConsumableArray(_this.props.value);\n\n      _this.setValue(valueArray.concat(item), item, STATE_CHANGE_TYPE.select);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"backspaceValue\", function () {\n      var item = _this.popValue();\n\n      if (!item) {\n        return;\n      }\n\n      var valueLength = _this.props.value.length;\n      var renderLabel = _this.props.getValueLabel || _this.getValueLabel;\n      var labelForInput = renderLabel({\n        option: item,\n        index: valueLength - 1\n      }); // label might not be a string, it might be a Node of another kind.\n\n      if (typeof labelForInput === 'string') {\n        var remainingInput = labelForInput.slice(0, -1);\n\n        _this.setState({\n          inputValue: remainingInput,\n          isOpen: true\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"popValue\", function () {\n      var valueArray = _toConsumableArray(_this.props.value);\n\n      var valueLength = valueArray.length;\n      if (!valueLength) return;\n      if (valueArray[valueLength - 1].clearableValue === false) return;\n      var item = valueArray.pop();\n\n      _this.setValue(valueArray, item, STATE_CHANGE_TYPE.remove);\n\n      return item;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeValue\", function (item) {\n      var valueArray = _toConsumableArray(_this.props.value);\n\n      _this.setValue(valueArray.filter(function (i) {\n        return i[_this.props.valueKey] !== item[_this.props.valueKey];\n      }), item, STATE_CHANGE_TYPE.remove);\n\n      _this.focus();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearValue\", function (event) {\n      if (isClick(event) && !isLeftClick(event)) return;\n\n      if (_this.props.value) {\n        var resetValue = _this.props.value.filter(function (item) {\n          return item.clearableValue === false;\n        });\n\n        _this.setValue(resetValue, null, STATE_CHANGE_TYPE.clear);\n      }\n\n      _this.setState({\n        inputValue: '',\n        isOpen: false\n      });\n\n      _this.focus();\n\n      _this.focusAfterClear = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"shouldShowPlaceholder\", function () {\n      return !(_this.state.inputValue || _this.props.value && _this.props.value.length);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"shouldShowValue\", function () {\n      return !_this.state.inputValue;\n    });\n\n    _this.options = normalizeOptions(props.options);\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.autoFocus) {\n        this.focus();\n      }\n\n      this.isMounted = true;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (typeof document !== 'undefined') {\n        if (prevState.isOpen !== this.state.isOpen) {\n          if (this.state.isOpen) {\n            this.props.onOpen && this.props.onOpen();\n            document.addEventListener('touchstart', this.handleTouchOutside);\n          } else {\n            this.props.onClose && this.props.onClose();\n            document.removeEventListener('touchstart', this.handleTouchOutside);\n          }\n        }\n\n        if (!prevState.isFocused && this.state.isFocused) {\n          document.addEventListener('click', this.handleClickOutside);\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof document !== 'undefined') {\n        document.removeEventListener('touchstart', this.handleTouchOutside);\n      }\n\n      this.isMounted = false;\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (!this.input) return;\n      this.input.focus();\n    } // Handle touch outside on mobile to dismiss menu, ensures that the\n    // touch target is not within the anchor DOM node.\n\n  }, {\n    key: \"closeMenu\",\n    value: function closeMenu() {\n      if (this.props.onCloseResetsInput) {\n        this.setState({\n          inputValue: '',\n          isOpen: false,\n          isPseudoFocused: this.state.isFocused && !this.props.multi\n        });\n      } else {\n        this.setState({\n          isOpen: false,\n          isPseudoFocused: this.state.isFocused && !this.props.multi\n        });\n      }\n    }\n  }, {\n    key: \"getValueArray\",\n\n    /**\n     * Extends the value into an array from the given options\n     */\n    value: function getValueArray(value) {\n      var _this2 = this;\n\n      if (!Array.isArray(value)) {\n        if (value === null || value === undefined) return [];\n        value = [value];\n      }\n\n      return value.map(function (value) {\n        return expandValue(value, _this2.props);\n      });\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value, option, type) {\n      if (this.props.onChange) {\n        this.props.onChange({\n          value: value,\n          option: option,\n          type: type\n        });\n      }\n    }\n  }, {\n    key: \"renderLoading\",\n    value: function renderLoading() {\n      if (!this.props.isLoading) return;\n      var sharedProps = this.getSharedProps();\n      var _this$props$overrides = this.props.overrides,\n          overrides = _this$props$overrides === void 0 ? {} : _this$props$overrides;\n\n      var _getOverrides = getOverrides(overrides.LoadingIndicator, Spinner),\n          _getOverrides2 = _slicedToArray(_getOverrides, 2),\n          LoadingIndicator = _getOverrides2[0],\n          loadingIndicatorProps = _getOverrides2[1];\n\n      return React.createElement(LoadingIndicator, _extends({\n        size: 16,\n        overrides: {\n          Svg: {\n            style: getLoadingIconStyles\n          }\n        },\n        $silenceV10DeprecationWarning: true\n      }, sharedProps, loadingIndicatorProps));\n    }\n  }, {\n    key: \"renderValue\",\n    value: function renderValue(valueArray, isOpen, locale) {\n      var _this3 = this;\n\n      var _this$props$overrides2 = this.props.overrides,\n          overrides = _this$props$overrides2 === void 0 ? {} : _this$props$overrides2;\n      var sharedProps = this.getSharedProps();\n      var renderLabel = this.props.getValueLabel || this.getValueLabel;\n      var Value = this.props.valueComponent || Noop;\n\n      if (!valueArray.length) {\n        return null;\n      }\n\n      if (this.props.multi) {\n        return valueArray.map(function (value, i) {\n          var disabled = sharedProps.$disabled || value.clearableValue === false;\n          return React.createElement(Value, _extends({\n            value: value,\n            key: \"value-\".concat(i, \"-\").concat(value[_this3.props.valueKey]),\n            removeValue: function removeValue() {\n              return _this3.removeValue(value);\n            },\n            disabled: disabled,\n            overrides: {\n              MultiValue: overrides.MultiValue\n            }\n          }, sharedProps, {\n            $disabled: disabled\n          }), renderLabel({\n            option: value,\n            index: i\n          }));\n        });\n      } else if (this.shouldShowValue()) {\n        return React.createElement(Value, _extends({\n          value: valueArray[0][this.props.valueKey],\n          disabled: this.props.disabled,\n          overrides: {\n            SingleValue: overrides.SingleValue\n          }\n        }, sharedProps), renderLabel({\n          option: valueArray[0]\n        }));\n      }\n    }\n  }, {\n    key: \"renderInput\",\n    value: function renderInput() {\n      var _this4 = this;\n\n      var _this$props$overrides3 = this.props.overrides,\n          overrides = _this$props$overrides3 === void 0 ? {} : _this$props$overrides3;\n\n      var _getOverrides3 = getOverrides(overrides.InputContainer, StyledInputContainer),\n          _getOverrides4 = _slicedToArray(_getOverrides3, 2),\n          InputContainer = _getOverrides4[0],\n          inputContainerProps = _getOverrides4[1];\n\n      var sharedProps = this.getSharedProps();\n      var isOpen = this.state.isOpen;\n      var selected = this.getValueArray(this.props.value).map(function (v) {\n        return v[_this4.props.labelKey];\n      }).join(', ');\n      var selectedLabel = selected.length ? \"Selected \".concat(selected, \". \") : '';\n      var label = \"\".concat(selectedLabel).concat(this.props['aria-label'] || '');\n\n      if (!this.props.searchable) {\n        return React.createElement(InputContainer, _extends({\n          \"aria-activedescendant\": this.state.activeDescendant,\n          \"aria-expanded\": isOpen,\n          \"aria-disabled\": this.props.disabled,\n          \"aria-label\": label,\n          \"aria-labelledby\": this.props['aria-labelledby'],\n          \"aria-owns\": this.state.isOpen ? this.listboxId : null,\n          \"aria-required\": this.props.required || null,\n          onFocus: this.handleInputFocus,\n          ref: function ref(_ref4) {\n            return _this4.input = _ref4;\n          },\n          tabIndex: 0\n        }, sharedProps, inputContainerProps));\n      }\n\n      return React.createElement(InputContainer, _extends({}, sharedProps, inputContainerProps), React.createElement(AutosizeInput, _extends({\n        \"aria-activedescendant\": this.state.activeDescendant,\n        \"aria-autocomplete\": \"list\",\n        \"aria-controls\": this.state.isOpen ? this.listboxId : null,\n        \"aria-describedby\": this.props['aria-describedby'],\n        \"aria-errormessage\": this.props['aria-errormessage'],\n        \"aria-disabled\": this.props.disabled || null,\n        \"aria-expanded\": isOpen,\n        \"aria-haspopup\": \"listbox\",\n        \"aria-label\": label,\n        \"aria-labelledby\": this.props['aria-labelledby'],\n        \"aria-required\": this.props.required || null,\n        disabled: this.props.disabled || null,\n        id: this.props.id || null,\n        inputRef: function inputRef(ref) {\n          return _this4.input = ref;\n        },\n        onChange: this.handleInputChange,\n        onFocus: this.handleInputFocus,\n        overrides: {\n          Input: overrides.Input\n        },\n        required: this.props.required && !this.props.value.length || null,\n        role: \"combobox\",\n        value: this.state.inputValue,\n        tabIndex: 0\n      }, sharedProps)));\n    }\n  }, {\n    key: \"renderClear\",\n    value: function renderClear() {\n      var isValueEntered = Boolean(this.props.value && this.props.value.length || this.state.inputValue);\n\n      if (!this.props.clearable || this.props.disabled || this.props.isLoading || !isValueEntered) {\n        return;\n      }\n\n      var sharedProps = this.getSharedProps();\n      var _this$props$overrides4 = this.props.overrides,\n          overrides = _this$props$overrides4 === void 0 ? {} : _this$props$overrides4;\n\n      var _getOverrides5 = getOverrides(overrides.ClearIcon, DeleteAlt),\n          _getOverrides6 = _slicedToArray(_getOverrides5, 2),\n          ClearIcon = _getOverrides6[0],\n          clearIconProps = _getOverrides6[1];\n\n      var ariaLabel = this.props.multi ? 'Clear all' : 'Clear value';\n      return React.createElement(ClearIcon, _extends({\n        size: 16,\n        title: ariaLabel,\n        \"aria-label\": ariaLabel,\n        onClick: this.clearValue,\n        onTouchEnd: this.handleTouchEndClearValue,\n        onTouchMove: this.handleTouchMove,\n        onTouchStart: this.handleTouchStart,\n        role: \"button\",\n        overrides: {\n          Svg: {\n            component: StyledClearIcon,\n            props: overrides.ClearIcon && overrides.ClearIcon.props ? overrides.ClearIcon.props : {},\n            style: overrides.ClearIcon && overrides.ClearIcon.style ? overrides.ClearIcon.style : {}\n          }\n        }\n      }, sharedProps, clearIconProps));\n    }\n  }, {\n    key: \"renderArrow\",\n    value: function renderArrow() {\n      if (this.props.type !== TYPE.select) {\n        return null;\n      }\n\n      var _this$props$overrides5 = this.props.overrides,\n          overrides = _this$props$overrides5 === void 0 ? {} : _this$props$overrides5;\n\n      var _getOverrides7 = getOverrides(overrides.SelectArrow, TriangleDownIcon),\n          _getOverrides8 = _slicedToArray(_getOverrides7, 2),\n          SelectArrow = _getOverrides8[0],\n          selectArrowProps = _getOverrides8[1];\n\n      var sharedProps = this.getSharedProps();\n      return React.createElement(SelectArrow, _extends({\n        size: 16,\n        title: 'open',\n        overrides: {\n          Svg: {\n            component: StyledSelectArrow,\n            props: overrides.SelectArrow && overrides.SelectArrow.props ? overrides.SelectArrow.props : {},\n            style: overrides.SelectArrow && overrides.SelectArrow.style ? overrides.SelectArrow.style : {}\n          }\n        }\n      }, sharedProps, selectArrowProps));\n    }\n  }, {\n    key: \"renderSearch\",\n    value: function renderSearch() {\n      if (this.props.type !== TYPE.search) {\n        return null;\n      }\n\n      var _this$props$overrides6 = this.props.overrides,\n          overrides = _this$props$overrides6 === void 0 ? {} : _this$props$overrides6;\n\n      var _getOverrides9 = getOverrides(overrides.SearchIconContainer, StyledSearchIconContainer),\n          _getOverrides10 = _slicedToArray(_getOverrides9, 2),\n          SearchIconContainer = _getOverrides10[0],\n          searchIconContainerProps = _getOverrides10[1];\n\n      var _getOverrides11 = getOverrides(overrides.SearchIcon, SearchIconComponent),\n          _getOverrides12 = _slicedToArray(_getOverrides11, 2),\n          SearchIcon = _getOverrides12[0],\n          searchIconProps = _getOverrides12[1];\n\n      var sharedProps = this.getSharedProps();\n      return (// TODO(v10): remove searchIconProps from SearchIconContainer\n        React.createElement(SearchIconContainer, _extends({}, sharedProps, searchIconProps, searchIconContainerProps), React.createElement(SearchIcon, _extends({\n          size: 16,\n          title: 'search'\n        }, searchIconProps)))\n      );\n    }\n  }, {\n    key: \"filterOptions\",\n    value: function filterOptions(excludeOptions) {\n      var _this5 = this;\n\n      var filterValue = this.state.inputValue; // apply filter function\n\n      if (this.props.filterOptions) {\n        this.options = this.props.filterOptions(this.options, filterValue, excludeOptions, {\n          valueKey: this.props.valueKey,\n          labelKey: this.props.labelKey\n        });\n      } // can user create a new option + there's no exact match already\n\n\n      if (filterValue && this.props.creatable && this.options.concat(this.props.value).every(function (opt) {\n        return opt[_this5.props.labelKey].toLowerCase() !== filterValue.toLowerCase().trim();\n      })) {\n        var _this$options$push;\n\n        // $FlowFixMe - this.options is typed as a read-only array\n        this.options.push((_this$options$push = {\n          id: filterValue\n        }, _defineProperty(_this$options$push, this.props.labelKey, filterValue), _defineProperty(_this$options$push, this.props.valueKey, filterValue), _defineProperty(_this$options$push, \"isCreatable\", true), _this$options$push));\n      }\n\n      return this.options;\n    }\n  }, {\n    key: \"getSharedProps\",\n    value: function getSharedProps() {\n      var _this$props = this.props,\n          clearable = _this$props.clearable,\n          creatable = _this$props.creatable,\n          disabled = _this$props.disabled,\n          error = _this$props.error,\n          positive = _this$props.positive,\n          isLoading = _this$props.isLoading,\n          multi = _this$props.multi,\n          required = _this$props.required,\n          size = _this$props.size,\n          searchable = _this$props.searchable,\n          type = _this$props.type,\n          value = _this$props.value;\n      var _this$state = this.state,\n          isOpen = _this$state.isOpen,\n          isFocused = _this$state.isFocused,\n          isPseudoFocused = _this$state.isPseudoFocused;\n      return {\n        $clearable: clearable,\n        $creatable: creatable,\n        $disabled: disabled,\n        $error: error,\n        $positive: positive,\n        $isFocused: isFocused,\n        $isLoading: isLoading,\n        $isOpen: isOpen,\n        $isPseudoFocused: isPseudoFocused,\n        $multi: multi,\n        $required: required,\n        $searchable: searchable,\n        $size: size,\n        $type: type,\n        $isEmpty: !this.getValueArray(value).length\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      this.options = normalizeOptions(this.props.options);\n      var _this$props2 = this.props,\n          _this$props2$override = _this$props2.overrides,\n          overrides = _this$props2$override === void 0 ? {} : _this$props2$override,\n          type = _this$props2.type,\n          multi = _this$props2.multi,\n          noResultsMsg = _this$props2.noResultsMsg,\n          value = _this$props2.value,\n          filterOutSelected = _this$props2.filterOutSelected;\n\n      if (process.env.NODE_ENV !== \"production\") {\n        // value may be nullish, only warn if value is defined\n        if (value && !Array.isArray(value)) {\n          console.warn('The Select component expects an array as the value prop. For more information, please visit the docs at https://baseweb.design/components/select/');\n        }\n      }\n\n      var _getOverrides13 = getOverrides(overrides.Root, StyledRoot),\n          _getOverrides14 = _slicedToArray(_getOverrides13, 2),\n          Root = _getOverrides14[0],\n          rootProps = _getOverrides14[1];\n\n      var _getOverrides15 = getOverrides(overrides.ControlContainer, StyledControlContainer),\n          _getOverrides16 = _slicedToArray(_getOverrides15, 2),\n          ControlContainer = _getOverrides16[0],\n          controlContainerProps = _getOverrides16[1];\n\n      var _getOverrides17 = getOverrides(overrides.ValueContainer, StyledValueContainer),\n          _getOverrides18 = _slicedToArray(_getOverrides17, 2),\n          ValueContainer = _getOverrides18[0],\n          valueContainerProps = _getOverrides18[1];\n\n      var _getOverrides19 = getOverrides(overrides.IconsContainer, StyledIconsContainer),\n          _getOverrides20 = _slicedToArray(_getOverrides19, 2),\n          IconsContainer = _getOverrides20[0],\n          iconsContainerProps = _getOverrides20[1];\n\n      var _getOverrides21 = getOverrides(overrides.Popover, Popover),\n          _getOverrides22 = _slicedToArray(_getOverrides21, 2),\n          PopoverOverride = _getOverrides22[0],\n          popoverProps = _getOverrides22[1];\n\n      var _getOverrides23 = getOverrides(overrides.Placeholder, StyledPlaceholder),\n          _getOverrides24 = _slicedToArray(_getOverrides23, 2),\n          Placeholder = _getOverrides24[0],\n          placeholderProps = _getOverrides24[1];\n\n      var sharedProps = this.getSharedProps();\n      var valueArray = this.getValueArray(value);\n      var options = this.filterOptions(multi && filterOutSelected ? valueArray : null);\n      var isOpen = this.state.isOpen;\n      sharedProps.$isOpen = isOpen;\n\n      if (process.env.NODE_ENV !== \"production\") {\n        if (this.props.error && this.props.positive) {\n          // eslint-disable-next-line no-console\n          console.warn(\"[Select] `error` and `positive` are both set to `true`. `error` will take precedence but this may not be what you want.\");\n        }\n      }\n\n      return React.createElement(LocaleContext.Consumer, null, function (locale) {\n        return React.createElement(PopoverOverride // Popover does not provide ability to forward refs through, and if we were to simply\n        // apply the ref to the Root component below it would be overwritten before the popover\n        // renders it. Using this strategy, we will get a ref to the popover, then reuse its\n        // anchorRef so we can check if clicks are on the select component or not.\n        // eslint-disable-next-line flowtype/no-weak-types\n        , _extends({\n          ref: function ref(_ref5) {\n            if (!_ref5) return;\n            _this6.anchor = _ref5.anchorRef;\n          },\n          focusLock: false,\n          mountNode: _this6.props.mountNode,\n          onEsc: function onEsc() {\n            return _this6.closeMenu();\n          },\n          isOpen: isOpen,\n          content: function content() {\n            var dropdownProps = {\n              error: _this6.props.error,\n              positive: _this6.props.positive,\n              getOptionLabel: _this6.props.getOptionLabel || _this6.getOptionLabel.bind(_this6, locale),\n              id: _this6.listboxId,\n              isLoading: _this6.props.isLoading,\n              labelKey: _this6.props.labelKey,\n              maxDropdownHeight: _this6.props.maxDropdownHeight,\n              multi: multi,\n              noResultsMsg: noResultsMsg,\n              onActiveDescendantChange: _this6.handleActiveDescendantChange,\n              onItemSelect: _this6.selectValue,\n              options: options,\n              overrides: overrides,\n              required: _this6.props.required,\n              searchable: _this6.props.searchable,\n              size: _this6.props.size,\n              type: type,\n              value: valueArray,\n              valueKey: _this6.props.valueKey,\n              width: _this6.anchor.current ? _this6.anchor.current.clientWidth : null\n            };\n            return React.createElement(SelectDropdown, _extends({\n              innerRef: _this6.dropdown\n            }, dropdownProps));\n          },\n          placement: PLACEMENT.bottom\n        }, popoverProps), React.createElement(Root, _extends({\n          onBlur: _this6.handleBlur,\n          \"data-baseweb\": \"select\"\n        }, sharedProps, rootProps), React.createElement(ControlContainer, _extends({\n          onKeyDown: _this6.handleKeyDown,\n          onClick: _this6.handleClick,\n          onTouchEnd: _this6.handleTouchEnd,\n          onTouchMove: _this6.handleTouchMove,\n          onTouchStart: _this6.handleTouchStart\n        }, sharedProps, controlContainerProps), type === TYPE.search ? _this6.renderSearch() : null, React.createElement(ValueContainer, _extends({}, sharedProps, valueContainerProps), _this6.renderValue(valueArray, isOpen, locale), _this6.renderInput(), _this6.shouldShowPlaceholder() ? React.createElement(Placeholder, _extends({}, sharedProps, placeholderProps), typeof _this6.props.placeholder !== 'undefined' ? _this6.props.placeholder : locale.select.placeholder) : null), React.createElement(IconsContainer, _extends({}, sharedProps, iconsContainerProps), _this6.renderLoading(), _this6.renderClear(), type === TYPE.select ? _this6.renderArrow() : null))));\n      });\n    }\n  }]);\n\n  return Select;\n}(React.Component);\n\n_defineProperty(Select, \"defaultProps\", defaultProps);\n\nexport default Select;"]},"metadata":{},"sourceType":"module"}