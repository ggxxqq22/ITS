{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Toolbox = Toolbox;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _editModes = require(\"@nebula.gl/edit-modes\");\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _icon = require(\"./icon\");\n\nvar _importModal = require(\"./import-modal\");\n\nvar _exportModal = require(\"./export-modal\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row-reverse;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  color: #fff;\\n  background: \", \";\\n  font-size: 1em;\\n  font-weight: 400;\\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\\n    'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\\n    'Noto Color Emoji';\\n  border: 1px solid transparent;\\n  border-radius: 0.25em;\\n  margin: 0.05em;\\n  padding: 0.1em 0.2em;\\n  :hover {\\n    background: rgb(128, 137, 133);\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  display: flex;\\n  flex-direction: column;\\n  top: 10px;\\n  right: 10px;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nvar Tools = _styledComponents[\"default\"].div(_templateObject());\n\nvar Button = _styledComponents[\"default\"].button(_templateObject2(), function (_ref) {\n  var kind = _ref.kind,\n      active = _ref.active;\n  return kind === 'danger' ? 'rgb(180, 40, 40)' : active ? 'rgb(0, 105, 217)' : 'rgb(90, 98, 94)';\n});\n\nvar SubToolsContainer = _styledComponents[\"default\"].div(_templateObject3());\n\nvar SubTools = _styledComponents[\"default\"].div(_templateObject4());\n\nvar MODE_GROUPS = [{\n  modes: [{\n    mode: _editModes.ViewMode,\n    content: /*#__PURE__*/React.createElement(_icon.Icon, {\n      name: \"pointer\"\n    })\n  }]\n}, {\n  modes: [{\n    mode: _editModes.DrawPointMode,\n    content: /*#__PURE__*/React.createElement(_icon.Icon, {\n      name: \"map-pin\"\n    })\n  }]\n}, {\n  modes: [{\n    mode: _editModes.DrawLineStringMode,\n    content: /*#__PURE__*/React.createElement(_icon.Icon, {\n      name: \"stats\"\n    })\n  }]\n}, {\n  modes: [{\n    mode: _editModes.DrawPolygonMode,\n    content: /*#__PURE__*/React.createElement(_icon.Icon, {\n      name: \"shape-polygon\"\n    })\n  }, {\n    mode: _editModes.DrawRectangleMode,\n    content: /*#__PURE__*/React.createElement(_icon.Icon, {\n      name: \"rectangle\"\n    })\n  }, {\n    mode: _editModes.DrawCircleFromCenterMode,\n    content: /*#__PURE__*/React.createElement(_icon.Icon, {\n      name: \"circle\"\n    })\n  }]\n}, {\n  modes: [{\n    mode: _editModes.MeasureDistanceMode,\n    content: /*#__PURE__*/React.createElement(_icon.Icon, {\n      name: \"ruler\"\n    })\n  }, {\n    mode: _editModes.MeasureAngleMode,\n    content: /*#__PURE__*/React.createElement(_icon.Icon, {\n      name: \"shape-triangle\"\n    })\n  }, {\n    mode: _editModes.MeasureAreaMode,\n    content: /*#__PURE__*/React.createElement(_icon.Icon, {\n      name: \"shape-square\"\n    })\n  }]\n}];\n\nfunction ModeButton(_ref2) {\n  var buttonConfig = _ref2.buttonConfig,\n      mode = _ref2.mode,\n      onClick = _ref2.onClick;\n  return /*#__PURE__*/React.createElement(Button, {\n    active: buttonConfig.mode === mode,\n    onClick: onClick\n  }, buttonConfig.content);\n}\n\nfunction ModeGroupButtons(_ref3) {\n  var modeGroup = _ref3.modeGroup,\n      mode = _ref3.mode,\n      onSetMode = _ref3.onSetMode;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      expanded = _React$useState2[0],\n      setExpanded = _React$useState2[1];\n\n  var modes = modeGroup.modes;\n  var subTools = null;\n\n  if (expanded) {\n    subTools = /*#__PURE__*/React.createElement(SubTools, null, modes.map(function (buttonConfig, i) {\n      return /*#__PURE__*/React.createElement(ModeButton, {\n        key: i,\n        buttonConfig: buttonConfig,\n        mode: mode,\n        onClick: function onClick() {\n          onSetMode(function () {\n            return buttonConfig.mode;\n          });\n          setExpanded(false);\n        }\n      });\n    }));\n  } // Get the button config if it is active otherwise, choose the first\n\n\n  var buttonConfig = modes.find(function (m) {\n    return m.mode === mode;\n  }) || modes[0];\n  return /*#__PURE__*/React.createElement(SubToolsContainer, null, subTools, /*#__PURE__*/React.createElement(ModeButton, {\n    buttonConfig: buttonConfig,\n    mode: mode,\n    onClick: function onClick() {\n      onSetMode(function () {\n        return buttonConfig.mode;\n      });\n      setExpanded(true);\n    }\n  }));\n}\n\nfunction Toolbox(_ref4) {\n  var mode = _ref4.mode,\n      modeConfig = _ref4.modeConfig,\n      geoJson = _ref4.geoJson,\n      onSetMode = _ref4.onSetMode,\n      onSetModeConfig = _ref4.onSetModeConfig,\n      onSetGeoJson = _ref4.onSetGeoJson,\n      _onImport = _ref4.onImport;\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      showConfig = _React$useState4[0],\n      setShowConfig = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      showImport = _React$useState6[0],\n      setShowImport = _React$useState6[1];\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      showExport = _React$useState8[0],\n      setShowExport = _React$useState8[1];\n\n  var _React$useState9 = React.useState(false),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      showClearConfirmation = _React$useState10[0],\n      setShowClearConfirmation = _React$useState10[1];\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Tools, null, MODE_GROUPS.map(function (modeGroup, i) {\n    return /*#__PURE__*/React.createElement(ModeGroupButtons, {\n      key: i,\n      modeGroup: modeGroup,\n      mode: mode,\n      onSetMode: onSetMode\n    });\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setShowExport(true);\n    },\n    title: \"Export\"\n  }, /*#__PURE__*/React.createElement(_icon.Icon, {\n    name: \"export\"\n  })), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setShowImport(true);\n    },\n    title: \"Import\"\n  }, /*#__PURE__*/React.createElement(_icon.Icon, {\n    name: \"import\"\n  })), /*#__PURE__*/React.createElement(SubToolsContainer, null, showConfig && /*#__PURE__*/React.createElement(SubTools, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setShowConfig(false);\n    }\n  }, /*#__PURE__*/React.createElement(_icon.Icon, {\n    name: \"chevron-right\"\n  })), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return onSetModeConfig({\n        booleanOperation: 'difference'\n      });\n    },\n    active: modeConfig && modeConfig.booleanOperation === 'difference'\n  }, /*#__PURE__*/React.createElement(_icon.Icon, {\n    name: \"minus-front\"\n  })), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return onSetModeConfig({\n        booleanOperation: 'union'\n      });\n    },\n    active: modeConfig && modeConfig.booleanOperation === 'union'\n  }, /*#__PURE__*/React.createElement(_icon.Icon, {\n    name: \"unite\"\n  })), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return onSetModeConfig({\n        booleanOperation: 'intersection'\n      });\n    },\n    active: modeConfig && modeConfig.booleanOperation === 'intersection'\n  }, /*#__PURE__*/React.createElement(_icon.Icon, {\n    name: \"intersect\"\n  }))), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setShowConfig(true);\n    }\n  }, /*#__PURE__*/React.createElement(_icon.Icon, {\n    name: \"cog\"\n  }))), /*#__PURE__*/React.createElement(SubToolsContainer, null, showClearConfirmation && /*#__PURE__*/React.createElement(SubTools, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      onSetGeoJson({\n        type: 'FeatureCollection',\n        features: []\n      });\n      setShowClearConfirmation(false);\n    },\n    kind: \"danger\",\n    title: \"Clear all features\"\n  }, \"Clear all features \", /*#__PURE__*/React.createElement(_icon.Icon, {\n    name: \"trash\"\n  })), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setShowClearConfirmation(false);\n    }\n  }, \"Cancel\")), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setShowClearConfirmation(true);\n    },\n    title: \"Clear\"\n  }, /*#__PURE__*/React.createElement(_icon.Icon, {\n    name: \"trash\"\n  })))), showImport && /*#__PURE__*/React.createElement(_importModal.ImportModal, {\n    onImport: function onImport(imported) {\n      _onImport(imported);\n\n      setShowImport(false);\n    },\n    onClose: function onClose() {\n      return setShowImport(false);\n    }\n  }), showExport && /*#__PURE__*/React.createElement(_exportModal.ExportModal, {\n    geoJson: geoJson,\n    onClose: function onClose() {\n      return setShowExport(false);\n    }\n  }));\n}","map":{"version":3,"sources":["../src/toolbox.tsx"],"names":["Tools","styled","Button","kind","active","SubToolsContainer","SubTools","MODE_GROUPS","modes","mode","ViewMode","content","DrawPointMode","DrawLineStringMode","DrawPolygonMode","DrawRectangleMode","DrawCircleFromCenterMode","MeasureDistanceMode","MeasureAngleMode","MeasureAreaMode","buttonConfig","onClick","modeGroup","onSetMode","expanded","setExpanded","React","subTools","m","modeConfig","geoJson","onSetModeConfig","onSetGeoJson","onImport","showConfig","setShowConfig","showImport","setShowImport","showExport","setShowExport","showClearConfirmation","setShowClearConfirmation","booleanOperation","type","features"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  ViewMode,\n  DrawPointMode,\n  DrawLineStringMode,\n  DrawPolygonMode,\n  DrawCircleFromCenterMode,\n  DrawRectangleMode,\n  MeasureDistanceMode,\n  MeasureAngleMode,\n  MeasureAreaMode,\n} from '@nebula.gl/edit-modes';\nimport styled from 'styled-components';\nimport { Icon } from './icon';\n\nimport { ImportModal } from './import-modal';\nimport { ExportModal } from './export-modal';\n\nconst Tools = styled.div`\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  top: 10px;\n  right: 10px;\n`;\n\nconst Button = styled.button<{ active?: boolean; kind?: string }>`\n  color: #fff;\n  background: ${({ kind, active }) =>\n    kind === 'danger' ? 'rgb(180, 40, 40)' : active ? 'rgb(0, 105, 217)' : 'rgb(90, 98, 94)'};\n  font-size: 1em;\n  font-weight: 400;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n    'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n    'Noto Color Emoji';\n  border: 1px solid transparent;\n  border-radius: 0.25em;\n  margin: 0.05em;\n  padding: 0.1em 0.2em;\n  :hover {\n    background: rgb(128, 137, 133);\n  }\n`;\n\nconst SubToolsContainer = styled.div`\n  position: relative;\n`;\n\nconst SubTools = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n\nexport type Props = {\n  mode: any;\n  modeConfig: any;\n  geoJson: any;\n  onSetMode: (mode: any) => unknown;\n  onSetModeConfig: (modeConfig: any) => unknown;\n  onSetGeoJson: (geojson: any) => unknown;\n  onImport: (imported: any) => unknown;\n};\n\nconst MODE_GROUPS = [\n  {\n    modes: [{ mode: ViewMode, content: <Icon name=\"pointer\" /> }],\n  },\n  {\n    modes: [{ mode: DrawPointMode, content: <Icon name=\"map-pin\" /> }],\n  },\n  {\n    modes: [\n      {\n        mode: DrawLineStringMode,\n        content: <Icon name=\"stats\" />,\n      },\n    ],\n  },\n  {\n    modes: [\n      { mode: DrawPolygonMode, content: <Icon name=\"shape-polygon\" /> },\n      { mode: DrawRectangleMode, content: <Icon name=\"rectangle\" /> },\n      { mode: DrawCircleFromCenterMode, content: <Icon name=\"circle\" /> },\n    ],\n  },\n  {\n    modes: [\n      { mode: MeasureDistanceMode, content: <Icon name=\"ruler\" /> },\n      { mode: MeasureAngleMode, content: <Icon name=\"shape-triangle\" /> },\n      { mode: MeasureAreaMode, content: <Icon name=\"shape-square\" /> },\n    ],\n  },\n];\n\nfunction ModeButton({ buttonConfig, mode, onClick }: any) {\n  return (\n    <Button active={buttonConfig.mode === mode} onClick={onClick}>\n      {buttonConfig.content}\n    </Button>\n  );\n}\nfunction ModeGroupButtons({ modeGroup, mode, onSetMode }: any) {\n  const [expanded, setExpanded] = React.useState(false);\n\n  const { modes } = modeGroup;\n\n  let subTools = null;\n\n  if (expanded) {\n    subTools = (\n      <SubTools>\n        {modes.map((buttonConfig, i) => (\n          <ModeButton\n            key={i}\n            buttonConfig={buttonConfig}\n            mode={mode}\n            onClick={() => {\n              onSetMode(() => buttonConfig.mode);\n              setExpanded(false);\n            }}\n          />\n        ))}\n      </SubTools>\n    );\n  }\n\n  // Get the button config if it is active otherwise, choose the first\n  const buttonConfig = modes.find((m) => m.mode === mode) || modes[0];\n\n  return (\n    <SubToolsContainer>\n      {subTools}\n      <ModeButton\n        buttonConfig={buttonConfig}\n        mode={mode}\n        onClick={() => {\n          onSetMode(() => buttonConfig.mode);\n          setExpanded(true);\n        }}\n      />\n    </SubToolsContainer>\n  );\n}\n\nexport function Toolbox({\n  mode,\n  modeConfig,\n  geoJson,\n  onSetMode,\n  onSetModeConfig,\n  onSetGeoJson,\n  onImport,\n}: Props) {\n  const [showConfig, setShowConfig] = React.useState(false);\n  const [showImport, setShowImport] = React.useState(false);\n  const [showExport, setShowExport] = React.useState(false);\n  const [showClearConfirmation, setShowClearConfirmation] = React.useState(false);\n\n  return (\n    <>\n      <Tools>\n        {MODE_GROUPS.map((modeGroup, i) => (\n          <ModeGroupButtons key={i} modeGroup={modeGroup} mode={mode} onSetMode={onSetMode} />\n        ))}\n\n        {/* <box-icon name='current-location' ></box-icon> */}\n        <Button onClick={() => setShowExport(true)} title=\"Export\">\n          <Icon name=\"export\" />\n        </Button>\n        <Button onClick={() => setShowImport(true)} title=\"Import\">\n          <Icon name=\"import\" />\n        </Button>\n\n        <SubToolsContainer>\n          {showConfig && (\n            <SubTools>\n              <Button onClick={() => setShowConfig(false)}>\n                <Icon name=\"chevron-right\" />\n              </Button>\n              <Button\n                onClick={() => onSetModeConfig({ booleanOperation: 'difference' })}\n                active={modeConfig && modeConfig.booleanOperation === 'difference'}\n              >\n                <Icon name=\"minus-front\" />\n              </Button>\n              <Button\n                onClick={() => onSetModeConfig({ booleanOperation: 'union' })}\n                active={modeConfig && modeConfig.booleanOperation === 'union'}\n              >\n                <Icon name=\"unite\" />\n              </Button>\n              <Button\n                onClick={() => onSetModeConfig({ booleanOperation: 'intersection' })}\n                active={modeConfig && modeConfig.booleanOperation === 'intersection'}\n              >\n                <Icon name=\"intersect\" />\n              </Button>\n              {/* <Button onClick={() => setShowConfig(false)}>\n                <Icon name=\"x\" />\n              </Button> */}\n            </SubTools>\n          )}\n          <Button onClick={() => setShowConfig(true)}>\n            <Icon name=\"cog\" />\n          </Button>\n        </SubToolsContainer>\n\n        <SubToolsContainer>\n          {showClearConfirmation && (\n            <SubTools>\n              <Button\n                onClick={() => {\n                  onSetGeoJson({ type: 'FeatureCollection', features: [] });\n                  setShowClearConfirmation(false);\n                }}\n                kind=\"danger\"\n                title=\"Clear all features\"\n              >\n                Clear all features <Icon name=\"trash\" />\n              </Button>\n              <Button onClick={() => setShowClearConfirmation(false)}>Cancel</Button>\n            </SubTools>\n          )}\n          <Button onClick={() => setShowClearConfirmation(true)} title=\"Clear\">\n            <Icon name=\"trash\" />\n          </Button>\n        </SubToolsContainer>\n\n        {/* zoom in and out */}\n      </Tools>\n\n      {showImport && (\n        <ImportModal\n          onImport={(imported) => {\n            onImport(imported);\n            setShowImport(false);\n          }}\n          onClose={() => setShowImport(false)}\n        />\n      )}\n\n      {showExport && <ExportModal geoJson={geoJson} onClose={() => setShowExport(false)} />}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"script"}