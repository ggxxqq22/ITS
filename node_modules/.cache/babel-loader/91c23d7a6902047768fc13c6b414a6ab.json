{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/*\nCopyright (c) 2018-2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\n\n\nimport * as React from 'react'; // Files\n\nimport getBuiId from '../utils/get-bui-id.js';\nimport { STATE_CHANGE_TYPES, KEY_STRINGS } from './constants.js';\nimport { scrollItemIntoView } from './utils.js'; // Types\n\nvar MenuStatefulContainer = /*#__PURE__*/function (_React$Component) {\n  _inherits(MenuStatefulContainer, _React$Component);\n\n  function MenuStatefulContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MenuStatefulContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MenuStatefulContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", _objectSpread({}, _this.constructor.defaultProps.initialState, {}, _this.props.initialState));\n\n    _defineProperty(_assertThisInitialized(_this), \"rootRef\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"refList\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"optionIds\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (event) {\n      switch (event.key) {\n        case KEY_STRINGS.ArrowUp:\n        case KEY_STRINGS.ArrowDown:\n        case KEY_STRINGS.ArrowLeft:\n        case KEY_STRINGS.ArrowRight:\n        case KEY_STRINGS.Home:\n        case KEY_STRINGS.End:\n          _this.handleArrowKey(event);\n\n          break;\n\n        case KEY_STRINGS.Enter:\n          if (event.keyCode === 229) {\n            // ref.\n            // https://github.com/JedWatson/react-select/blob/e12b42b0e7598ec4a96a1a6480e0b2b4c7dc03e3/packages/react-select/src/Select.js#L1209\n            break;\n          }\n\n          _this.handleEnterKey(event);\n\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleArrowKey\", function (event) {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n      var prevIndex = _this.state.highlightedIndex;\n      var nextIndex = prevIndex;\n\n      if (event.key === KEY_STRINGS.ArrowUp) {\n        event.preventDefault();\n        nextIndex = Math.max(0, prevIndex - 1);\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveUp, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.ArrowDown) {\n        event.preventDefault();\n        nextIndex = Math.min(prevIndex + 1, _this.getItems().length - 1);\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveDown, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.Home) {\n        event.preventDefault();\n        nextIndex = 0;\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveUp, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.End) {\n        event.preventDefault();\n        nextIndex = _this.getItems().length - 1;\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveDown, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.ArrowLeft) {\n        if (_this.props.getParentMenu) {\n          var parent = _this.props.getParentMenu(rootRef);\n\n          if (parent && parent.current) {\n            parent.current.focus();\n          }\n        }\n      } else if (event.key === KEY_STRINGS.ArrowRight) {\n        if (_this.props.getChildMenu) {\n          var child = _this.props.getChildMenu(rootRef);\n\n          if (child && child.current) {\n            child.current.focus();\n          }\n        }\n      }\n\n      if (_this.refList[nextIndex]) {\n        scrollItemIntoView(_this.refList[nextIndex].current, // $FlowFixMe\n        rootRef.current, nextIndex === 0, nextIndex === _this.getItems().length - 1);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleEnterKey\", function (event) {\n      var onItemSelect = _this.props.onItemSelect;\n      var highlightedIndex = _this.state.highlightedIndex;\n\n      var items = _this.getItems();\n\n      if (items[highlightedIndex] && onItemSelect && !items[highlightedIndex].disabled) {\n        event.preventDefault();\n        onItemSelect({\n          item: items[highlightedIndex],\n          event: event\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleItemClick\", function (index, item, event) {\n      if (_this.props.onItemSelect && !item.disabled) {\n        _this.props.onItemSelect({\n          item: item,\n          event: event\n        });\n\n        _this.internalSetState(STATE_CHANGE_TYPES.click, {\n          highlightedIndex: index,\n          activedescendantId: _this.optionIds[index]\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseEnter\", function (index) {\n      _this.internalSetState(STATE_CHANGE_TYPES.mouseEnter, {\n        highlightedIndex: index,\n        activedescendantId: _this.optionIds[index]\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseLeave\", function () {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n\n      if (!_this.props.getChildMenu || !_this.props.getChildMenu(rootRef)) {\n        _this.internalSetState(STATE_CHANGE_TYPES.mouseLeave, {\n          highlightedIndex: -1\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRequiredItemProps\", function (item, index) {\n      var itemRef = _this.refList[index];\n\n      if (!itemRef) {\n        itemRef = React.createRef();\n        _this.refList[index] = itemRef;\n        _this.optionIds[index] = getBuiId();\n      }\n\n      var _this$props$getRequir = _this.props.getRequiredItemProps(item, index),\n          disabledVal = _this$props$getRequir.disabled,\n          requiredItemProps = _objectWithoutProperties(_this$props$getRequir, [\"disabled\"]);\n\n      var disabled = typeof disabledVal === 'boolean' ? disabledVal : !!item.disabled;\n      return _objectSpread({\n        id: requiredItemProps.id || _this.optionIds[index],\n        disabled: disabled,\n        ref: itemRef,\n        isFocused: _this.state.isFocused,\n        isHighlighted: _this.state.highlightedIndex === index,\n        resetMenu: _this.resetMenu\n      }, disabled ? {} : {\n        onClick: _this.handleItemClick.bind(_assertThisInitialized(_this), index, item),\n        onMouseEnter: _this.handleMouseEnter.bind(_assertThisInitialized(_this), index)\n      }, {}, requiredItemProps);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"focusMenu\", function (event) {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n\n      if (_this.state.isFocused) {\n        return;\n      } // $FlowFixMe\n\n\n      if (rootRef.current && rootRef.current.contains(event.target)) {\n        if (_this.state.highlightedIndex < 0) {\n          _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n            isFocused: true,\n            highlightedIndex: 0\n          });\n        } else {\n          _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n            isFocused: true\n          });\n        }\n\n        rootRef.current.focus();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unfocusMenu\", function () {\n      _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n        isFocused: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetMenu\", function () {\n      _this.internalSetState(STATE_CHANGE_TYPES.reset, {\n        isFocused: false,\n        highlightedIndex: -1,\n        activedescendantId: null\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(MenuStatefulContainer, [{\n    key: \"getItems\",\n    value: function getItems() {\n      var _this2 = this;\n\n      if (Array.isArray(this.props.items)) {\n        return this.props.items;\n      }\n\n      var optgroups = Object.keys(this.props.items);\n      return optgroups.reduce(function (output, optgroup) {\n        // $FlowFixMe already checked above that items is grouped shape\n        return output.concat(_this2.props.items[optgroup]);\n      }, []);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var rootRef = this.props.rootRef ? this.props.rootRef : this.rootRef;\n\n      if (typeof document !== 'undefined') {\n        if (rootRef.current\n        /** This condition added to satisfy Flow */\n        && this.state.highlightedIndex > -1 && this.refList[this.state.highlightedIndex]) {\n          scrollItemIntoView(this.refList[this.state.highlightedIndex].current, rootRef.current, this.state.highlightedIndex === 0, this.state.highlightedIndex === this.getItems().length - 1, 'center');\n        }\n\n        if (this.state.isFocused) {\n          document.addEventListener('keydown', this.onKeyDown);\n        }\n      }\n\n      this.props.addMenuToNesting && this.props.addMenuToNesting(rootRef);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var rootRef = this.props.rootRef ? this.props.rootRef : this.rootRef;\n\n      if (typeof document !== 'undefined') {\n        document.removeEventListener('keydown', this.onKeyDown);\n      }\n\n      this.props.removeMenuFromNesting && this.props.removeMenuFromNesting(rootRef);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_, prevState) {\n      if (typeof document !== 'undefined') {\n        if (!prevState.isFocused && this.state.isFocused) {\n          document.addEventListener('keydown', this.onKeyDown);\n        } else if (prevState.isFocused && !this.state.isFocused) {\n          document.removeEventListener('keydown', this.onKeyDown);\n        }\n      }\n    } // One array to hold all of list item refs\n\n  }, {\n    key: \"internalSetState\",\n    // Internal set state function that will also invoke stateReducer\n    value: function internalSetState(changeType, changes) {\n      var stateReducer = this.props.stateReducer;\n\n      if (this.props.onActiveDescendantChange && typeof changes.highlightedIndex === 'number' && this.state.highlightedIndex !== changes.highlightedIndex) {\n        this.props.onActiveDescendantChange(this.optionIds[changes.highlightedIndex]);\n      }\n\n      this.setState(stateReducer(changeType, changes, this.state));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // omit the stateful-container's props and don't pass it down\n      // to the children (stateless menu)\n      var _this$props = this.props,\n          initialState = _this$props.initialState,\n          stateReducer = _this$props.stateReducer,\n          children = _this$props.children,\n          onItemSelect = _this$props.onItemSelect,\n          addMenuToNesting = _this$props.addMenuToNesting,\n          removeMenuFromNesting = _this$props.removeMenuFromNesting,\n          getParentMenu = _this$props.getParentMenu,\n          getChildMenu = _this$props.getChildMenu,\n          restProps = _objectWithoutProperties(_this$props, [\"initialState\", \"stateReducer\", \"children\", \"onItemSelect\", \"addMenuToNesting\", \"removeMenuFromNesting\", \"getParentMenu\", \"getChildMenu\"]);\n\n      return this.props.children(_objectSpread({}, restProps, {\n        rootRef: this.props.rootRef ? this.props.rootRef : this.rootRef,\n        activedescendantId: this.optionIds[this.state.highlightedIndex],\n        getRequiredItemProps: this.getRequiredItemProps,\n        handleMouseLeave: this.handleMouseLeave,\n        highlightedIndex: this.state.highlightedIndex,\n        isFocused: this.state.isFocused,\n        focusMenu: this.focusMenu,\n        unfocusMenu: this.unfocusMenu\n      }));\n    }\n  }]);\n\n  return MenuStatefulContainer;\n}(React.Component);\n\n_defineProperty(MenuStatefulContainer, \"defaultProps\", {\n  // keeping it in defaultProps to satisfy Flow\n  initialState: {\n    // We start the index at -1 to indicate that no highlighting exists initially\n    highlightedIndex: -1,\n    isFocused: false\n  },\n  stateReducer: function (changeType, changes) {\n    return changes;\n  },\n  onItemSelect: function onItemSelect() {},\n  getRequiredItemProps: function getRequiredItemProps() {\n    return {};\n  },\n  children: function children() {\n    return null;\n  },\n  // from nested-menus context\n  addMenuToNesting: function addMenuToNesting() {},\n  removeMenuFromNesting: function removeMenuFromNesting() {},\n  getParentMenu: function getParentMenu() {},\n  getChildMenu: function getChildMenu() {}\n});\n\nexport { MenuStatefulContainer as default };","map":{"version":3,"sources":["/home/zhiguangda/ITS/deckgl/node_modules/baseui/esm/menu/stateful-container.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","propertyIsEnumerable","call","sourceKeys","keys","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","React","getBuiId","STATE_CHANGE_TYPES","KEY_STRINGS","scrollItemIntoView","MenuStatefulContainer","_React$Component","_getPrototypeOf2","_this","_len","args","Array","_key","concat","defaultProps","initialState","createRef","event","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","handleArrowKey","Enter","keyCode","handleEnterKey","rootRef","prevIndex","state","highlightedIndex","nextIndex","preventDefault","Math","max","internalSetState","moveUp","min","getItems","moveDown","getParentMenu","parent","current","focus","getChildMenu","child","refList","onItemSelect","items","disabled","item","index","click","activedescendantId","optionIds","mouseEnter","mouseLeave","itemRef","_this$props$getRequir","getRequiredItemProps","disabledVal","requiredItemProps","id","ref","isFocused","isHighlighted","resetMenu","onClick","handleItemClick","bind","onMouseEnter","handleMouseEnter","contains","reset","_this2","isArray","optgroups","reduce","output","optgroup","componentDidMount","document","addEventListener","onKeyDown","addMenuToNesting","componentWillUnmount","removeEventListener","removeMenuFromNesting","componentDidUpdate","_","prevState","changeType","changes","stateReducer","onActiveDescendantChange","setState","render","_this$props","children","restProps","handleMouseLeave","focusMenu","unfocusMenu","Component","default"],"mappings":"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","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\nCopyright (c) 2018-2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport * as React from 'react'; // Files\n\nimport getBuiId from '../utils/get-bui-id.js';\nimport { STATE_CHANGE_TYPES, KEY_STRINGS } from './constants.js';\nimport { scrollItemIntoView } from './utils.js'; // Types\n\nvar MenuStatefulContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MenuStatefulContainer, _React$Component);\n\n  function MenuStatefulContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MenuStatefulContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MenuStatefulContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", _objectSpread({}, _this.constructor.defaultProps.initialState, {}, _this.props.initialState));\n\n    _defineProperty(_assertThisInitialized(_this), \"rootRef\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"refList\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"optionIds\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (event) {\n      switch (event.key) {\n        case KEY_STRINGS.ArrowUp:\n        case KEY_STRINGS.ArrowDown:\n        case KEY_STRINGS.ArrowLeft:\n        case KEY_STRINGS.ArrowRight:\n        case KEY_STRINGS.Home:\n        case KEY_STRINGS.End:\n          _this.handleArrowKey(event);\n\n          break;\n\n        case KEY_STRINGS.Enter:\n          if (event.keyCode === 229) {\n            // ref.\n            // https://github.com/JedWatson/react-select/blob/e12b42b0e7598ec4a96a1a6480e0b2b4c7dc03e3/packages/react-select/src/Select.js#L1209\n            break;\n          }\n\n          _this.handleEnterKey(event);\n\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleArrowKey\", function (event) {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n      var prevIndex = _this.state.highlightedIndex;\n      var nextIndex = prevIndex;\n\n      if (event.key === KEY_STRINGS.ArrowUp) {\n        event.preventDefault();\n        nextIndex = Math.max(0, prevIndex - 1);\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveUp, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.ArrowDown) {\n        event.preventDefault();\n        nextIndex = Math.min(prevIndex + 1, _this.getItems().length - 1);\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveDown, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.Home) {\n        event.preventDefault();\n        nextIndex = 0;\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveUp, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.End) {\n        event.preventDefault();\n        nextIndex = _this.getItems().length - 1;\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveDown, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.ArrowLeft) {\n        if (_this.props.getParentMenu) {\n          var parent = _this.props.getParentMenu(rootRef);\n\n          if (parent && parent.current) {\n            parent.current.focus();\n          }\n        }\n      } else if (event.key === KEY_STRINGS.ArrowRight) {\n        if (_this.props.getChildMenu) {\n          var child = _this.props.getChildMenu(rootRef);\n\n          if (child && child.current) {\n            child.current.focus();\n          }\n        }\n      }\n\n      if (_this.refList[nextIndex]) {\n        scrollItemIntoView(_this.refList[nextIndex].current, // $FlowFixMe\n        rootRef.current, nextIndex === 0, nextIndex === _this.getItems().length - 1);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleEnterKey\", function (event) {\n      var onItemSelect = _this.props.onItemSelect;\n      var highlightedIndex = _this.state.highlightedIndex;\n\n      var items = _this.getItems();\n\n      if (items[highlightedIndex] && onItemSelect && !items[highlightedIndex].disabled) {\n        event.preventDefault();\n        onItemSelect({\n          item: items[highlightedIndex],\n          event: event\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleItemClick\", function (index, item, event) {\n      if (_this.props.onItemSelect && !item.disabled) {\n        _this.props.onItemSelect({\n          item: item,\n          event: event\n        });\n\n        _this.internalSetState(STATE_CHANGE_TYPES.click, {\n          highlightedIndex: index,\n          activedescendantId: _this.optionIds[index]\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseEnter\", function (index) {\n      _this.internalSetState(STATE_CHANGE_TYPES.mouseEnter, {\n        highlightedIndex: index,\n        activedescendantId: _this.optionIds[index]\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseLeave\", function () {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n\n      if (!_this.props.getChildMenu || !_this.props.getChildMenu(rootRef)) {\n        _this.internalSetState(STATE_CHANGE_TYPES.mouseLeave, {\n          highlightedIndex: -1\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRequiredItemProps\", function (item, index) {\n      var itemRef = _this.refList[index];\n\n      if (!itemRef) {\n        itemRef = React.createRef();\n        _this.refList[index] = itemRef;\n        _this.optionIds[index] = getBuiId();\n      }\n\n      var _this$props$getRequir = _this.props.getRequiredItemProps(item, index),\n          disabledVal = _this$props$getRequir.disabled,\n          requiredItemProps = _objectWithoutProperties(_this$props$getRequir, [\"disabled\"]);\n\n      var disabled = typeof disabledVal === 'boolean' ? disabledVal : !!item.disabled;\n      return _objectSpread({\n        id: requiredItemProps.id || _this.optionIds[index],\n        disabled: disabled,\n        ref: itemRef,\n        isFocused: _this.state.isFocused,\n        isHighlighted: _this.state.highlightedIndex === index,\n        resetMenu: _this.resetMenu\n      }, disabled ? {} : {\n        onClick: _this.handleItemClick.bind(_assertThisInitialized(_this), index, item),\n        onMouseEnter: _this.handleMouseEnter.bind(_assertThisInitialized(_this), index)\n      }, {}, requiredItemProps);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"focusMenu\", function (event) {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n\n      if (_this.state.isFocused) {\n        return;\n      } // $FlowFixMe\n\n\n      if (rootRef.current && rootRef.current.contains(event.target)) {\n        if (_this.state.highlightedIndex < 0) {\n          _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n            isFocused: true,\n            highlightedIndex: 0\n          });\n        } else {\n          _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n            isFocused: true\n          });\n        }\n\n        rootRef.current.focus();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unfocusMenu\", function () {\n      _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n        isFocused: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetMenu\", function () {\n      _this.internalSetState(STATE_CHANGE_TYPES.reset, {\n        isFocused: false,\n        highlightedIndex: -1,\n        activedescendantId: null\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(MenuStatefulContainer, [{\n    key: \"getItems\",\n    value: function getItems() {\n      var _this2 = this;\n\n      if (Array.isArray(this.props.items)) {\n        return this.props.items;\n      }\n\n      var optgroups = Object.keys(this.props.items);\n      return optgroups.reduce(function (output, optgroup) {\n        // $FlowFixMe already checked above that items is grouped shape\n        return output.concat(_this2.props.items[optgroup]);\n      }, []);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var rootRef = this.props.rootRef ? this.props.rootRef : this.rootRef;\n\n      if (typeof document !== 'undefined') {\n        if (rootRef.current\n        /** This condition added to satisfy Flow */\n        && this.state.highlightedIndex > -1 && this.refList[this.state.highlightedIndex]) {\n          scrollItemIntoView(this.refList[this.state.highlightedIndex].current, rootRef.current, this.state.highlightedIndex === 0, this.state.highlightedIndex === this.getItems().length - 1, 'center');\n        }\n\n        if (this.state.isFocused) {\n          document.addEventListener('keydown', this.onKeyDown);\n        }\n      }\n\n      this.props.addMenuToNesting && this.props.addMenuToNesting(rootRef);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var rootRef = this.props.rootRef ? this.props.rootRef : this.rootRef;\n\n      if (typeof document !== 'undefined') {\n        document.removeEventListener('keydown', this.onKeyDown);\n      }\n\n      this.props.removeMenuFromNesting && this.props.removeMenuFromNesting(rootRef);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_, prevState) {\n      if (typeof document !== 'undefined') {\n        if (!prevState.isFocused && this.state.isFocused) {\n          document.addEventListener('keydown', this.onKeyDown);\n        } else if (prevState.isFocused && !this.state.isFocused) {\n          document.removeEventListener('keydown', this.onKeyDown);\n        }\n      }\n    } // One array to hold all of list item refs\n\n  }, {\n    key: \"internalSetState\",\n    // Internal set state function that will also invoke stateReducer\n    value: function internalSetState(changeType, changes) {\n      var stateReducer = this.props.stateReducer;\n\n      if (this.props.onActiveDescendantChange && typeof changes.highlightedIndex === 'number' && this.state.highlightedIndex !== changes.highlightedIndex) {\n        this.props.onActiveDescendantChange(this.optionIds[changes.highlightedIndex]);\n      }\n\n      this.setState(stateReducer(changeType, changes, this.state));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // omit the stateful-container's props and don't pass it down\n      // to the children (stateless menu)\n      var _this$props = this.props,\n          initialState = _this$props.initialState,\n          stateReducer = _this$props.stateReducer,\n          children = _this$props.children,\n          onItemSelect = _this$props.onItemSelect,\n          addMenuToNesting = _this$props.addMenuToNesting,\n          removeMenuFromNesting = _this$props.removeMenuFromNesting,\n          getParentMenu = _this$props.getParentMenu,\n          getChildMenu = _this$props.getChildMenu,\n          restProps = _objectWithoutProperties(_this$props, [\"initialState\", \"stateReducer\", \"children\", \"onItemSelect\", \"addMenuToNesting\", \"removeMenuFromNesting\", \"getParentMenu\", \"getChildMenu\"]);\n\n      return this.props.children(_objectSpread({}, restProps, {\n        rootRef: this.props.rootRef ? this.props.rootRef : this.rootRef,\n        activedescendantId: this.optionIds[this.state.highlightedIndex],\n        getRequiredItemProps: this.getRequiredItemProps,\n        handleMouseLeave: this.handleMouseLeave,\n        highlightedIndex: this.state.highlightedIndex,\n        isFocused: this.state.isFocused,\n        focusMenu: this.focusMenu,\n        unfocusMenu: this.unfocusMenu\n      }));\n    }\n  }]);\n\n  return MenuStatefulContainer;\n}(React.Component);\n\n_defineProperty(MenuStatefulContainer, \"defaultProps\", {\n  // keeping it in defaultProps to satisfy Flow\n  initialState: {\n    // We start the index at -1 to indicate that no highlighting exists initially\n    highlightedIndex: -1,\n    isFocused: false\n  },\n  stateReducer: function (changeType, changes) {\n    return changes;\n  },\n  onItemSelect: function onItemSelect() {},\n  getRequiredItemProps: function getRequiredItemProps() {\n    return {};\n  },\n  children: function children() {\n    return null;\n  },\n  // from nested-menus context\n  addMenuToNesting: function addMenuToNesting() {},\n  removeMenuFromNesting: function removeMenuFromNesting() {},\n  getParentMenu: function getParentMenu() {},\n  getChildMenu: function getChildMenu() {}\n});\n\nexport { MenuStatefulContainer as default };"]},"metadata":{},"sourceType":"module"}