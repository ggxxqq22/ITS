{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nvar utils_1 = require(\"./utils\");\n\nvar types_1 = require(\"./types\");\n\nvar INCREASE_KEYS = ['ArrowRight', 'ArrowUp', 'k', 'PageUp'];\nvar DECREASE_KEYS = ['ArrowLeft', 'ArrowDown', 'j', 'PageDown'];\n\nvar Range =\n/** @class */\nfunction (_super) {\n  __extends(Range, _super);\n\n  function Range(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.trackRef = React.createRef();\n    _this.thumbRefs = [];\n    _this.state = {\n      draggedThumbIndex: -1,\n      thumbZIndexes: new Array(_this.props.values.length).fill(0).map(function (t, i) {\n        return i;\n      }),\n      isChanged: false\n    };\n\n    _this.getOffsets = function () {\n      var _a = _this.props,\n          direction = _a.direction,\n          values = _a.values,\n          min = _a.min,\n          max = _a.max;\n      var trackElement = _this.trackRef.current;\n      var trackRect = trackElement.getBoundingClientRect();\n      var trackPadding = utils_1.getPaddingAndBorder(trackElement);\n      return _this.getThumbs().map(function (thumb, index) {\n        var thumbOffsets = {\n          x: 0,\n          y: 0\n        };\n        var thumbRect = thumb.getBoundingClientRect();\n        var thumbMargins = utils_1.getMargin(thumb);\n\n        switch (direction) {\n          case types_1.Direction.Right:\n            thumbOffsets.x = (thumbMargins.left + trackPadding.left) * -1;\n            thumbOffsets.y = ((thumbRect.height - trackRect.height) / 2 + trackPadding.top) * -1;\n            thumbOffsets.x += trackRect.width * utils_1.relativeValue(values[index], min, max) - thumbRect.width / 2;\n            return thumbOffsets;\n\n          case types_1.Direction.Left:\n            thumbOffsets.x = (thumbMargins.right + trackPadding.right) * -1;\n            thumbOffsets.y = ((thumbRect.height - trackRect.height) / 2 + trackPadding.top) * -1;\n            thumbOffsets.x += trackRect.width - trackRect.width * utils_1.relativeValue(values[index], min, max) - thumbRect.width / 2;\n            return thumbOffsets;\n\n          case types_1.Direction.Up:\n            thumbOffsets.x = ((thumbRect.width - trackRect.width) / 2 + thumbMargins.left + trackPadding.left) * -1;\n            thumbOffsets.y = -trackPadding.left;\n            thumbOffsets.y += trackRect.height - trackRect.height * utils_1.relativeValue(values[index], min, max) - thumbRect.height / 2;\n            return thumbOffsets;\n\n          case types_1.Direction.Down:\n            thumbOffsets.x = ((thumbRect.width - trackRect.width) / 2 + thumbMargins.left + trackPadding.left) * -1;\n            thumbOffsets.y = -trackPadding.left;\n            thumbOffsets.y += trackRect.height * utils_1.relativeValue(values[index], min, max) - thumbRect.height / 2;\n            return thumbOffsets;\n\n          default:\n            return utils_1.assertUnreachable(direction);\n        }\n      });\n    };\n\n    _this.getThumbs = function () {\n      if (_this.trackRef && _this.trackRef.current) {\n        return Array.from(_this.trackRef.current.children);\n      }\n\n      console.warn('No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?');\n      return [];\n    };\n\n    _this.getTargetIndex = function (e) {\n      return _this.getThumbs().findIndex(function (child) {\n        return child === e.target || child.contains(e.target);\n      });\n    };\n\n    _this.addTouchEvents = function (e) {\n      document.addEventListener('touchmove', _this.schdOnTouchMove, {\n        passive: false\n      });\n      document.addEventListener('touchend', _this.schdOnEnd, {\n        passive: false\n      });\n      document.addEventListener('touchcancel', _this.schdOnEnd, {\n        passive: false\n      });\n    };\n\n    _this.addMouseEvents = function (e) {\n      document.addEventListener('mousemove', _this.schdOnMouseMove);\n      document.addEventListener('mouseup', _this.schdOnEnd);\n    };\n\n    _this.onMouseDownTrack = function (e) {\n      var _a; // in case there is a single thumb, we want to support\n      // moving the thumb to a place where the track is clicked\n\n\n      if (e.button !== 0 || _this.props.values.length > 1) return;\n      (_a = _this.thumbRefs[0].current) === null || _a === void 0 ? void 0 : _a.focus();\n      e.persist();\n      e.preventDefault();\n\n      _this.addMouseEvents(e.nativeEvent);\n\n      _this.setState({\n        draggedThumbIndex: 0\n      }, function () {\n        return _this.onMove(e.clientX, e.clientY);\n      });\n    };\n\n    _this.onResize = function () {\n      utils_1.translateThumbs(_this.getThumbs(), _this.getOffsets(), _this.props.rtl);\n    };\n\n    _this.onTouchStartTrack = function (e) {\n      // in case there is a single thumb, we want to support\n      // moving the thumb to a place where the track is clicked\n      if (_this.props.values.length > 1) return;\n      e.persist();\n\n      _this.addTouchEvents(e.nativeEvent);\n\n      _this.setState({\n        draggedThumbIndex: 0\n      }, function () {\n        return _this.onMove(e.touches[0].clientX, e.touches[0].clientY);\n      });\n    };\n\n    _this.onMouseOrTouchStart = function (e) {\n      if (_this.props.disabled) return;\n      var isTouch = utils_1.isTouchEvent(e);\n      if (!isTouch && e.button !== 0) return;\n\n      var index = _this.getTargetIndex(e);\n\n      if (index === -1) return;\n\n      if (isTouch) {\n        _this.addTouchEvents(e);\n      } else {\n        _this.addMouseEvents(e);\n      }\n\n      _this.setState({\n        draggedThumbIndex: index,\n        thumbZIndexes: _this.state.thumbZIndexes.map(function (t, i) {\n          if (i === index) {\n            return Math.max.apply(Math, _this.state.thumbZIndexes);\n          }\n\n          return t <= _this.state.thumbZIndexes[index] ? t : t - 1;\n        })\n      });\n    };\n\n    _this.onMouseMove = function (e) {\n      e.preventDefault();\n\n      _this.onMove(e.clientX, e.clientY);\n    };\n\n    _this.onTouchMove = function (e) {\n      e.preventDefault();\n\n      _this.onMove(e.touches[0].clientX, e.touches[0].clientY);\n    };\n\n    _this.onKeyDown = function (e) {\n      var _a = _this.props,\n          values = _a.values,\n          onChange = _a.onChange,\n          step = _a.step,\n          rtl = _a.rtl;\n      var isChanged = _this.state.isChanged;\n\n      var index = _this.getTargetIndex(e.nativeEvent);\n\n      var inverter = rtl ? -1 : 1;\n      if (index === -1) return;\n\n      if (INCREASE_KEYS.includes(e.key)) {\n        e.preventDefault();\n\n        _this.setState({\n          draggedThumbIndex: index,\n          isChanged: true\n        });\n\n        onChange(utils_1.replaceAt(values, index, _this.normalizeValue(values[index] + inverter * (e.key === 'PageUp' ? step * 10 : step), index)));\n      } else if (DECREASE_KEYS.includes(e.key)) {\n        e.preventDefault();\n\n        _this.setState({\n          draggedThumbIndex: index,\n          isChanged: true\n        });\n\n        onChange(utils_1.replaceAt(values, index, _this.normalizeValue(values[index] - inverter * (e.key === 'PageDown' ? step * 10 : step), index)));\n      } else if (e.key === 'Tab') {\n        _this.setState({\n          draggedThumbIndex: -1\n        }, function () {\n          // If key pressed when thumb was moving, fire onFinalChange\n          if (isChanged) {\n            _this.fireOnFinalChange();\n          }\n        });\n      } else {\n        if (isChanged) {\n          _this.fireOnFinalChange();\n        }\n      }\n    };\n\n    _this.onKeyUp = function (e) {\n      var isChanged = _this.state.isChanged;\n\n      _this.setState({\n        draggedThumbIndex: -1\n      }, function () {\n        if (isChanged) {\n          _this.fireOnFinalChange();\n        }\n      });\n    };\n\n    _this.onMove = function (clientX, clientY) {\n      var draggedThumbIndex = _this.state.draggedThumbIndex;\n      var _a = _this.props,\n          direction = _a.direction,\n          min = _a.min,\n          max = _a.max,\n          onChange = _a.onChange,\n          values = _a.values,\n          step = _a.step,\n          rtl = _a.rtl;\n      if (draggedThumbIndex === -1) return null;\n      var trackElement = _this.trackRef.current;\n      var trackRect = trackElement.getBoundingClientRect();\n      var trackLength = utils_1.isVertical(direction) ? trackRect.height : trackRect.width;\n      var newValue = 0;\n\n      switch (direction) {\n        case types_1.Direction.Right:\n          newValue = (clientX - trackRect.left) / trackLength * (max - min) + min;\n          break;\n\n        case types_1.Direction.Left:\n          newValue = (trackLength - (clientX - trackRect.left)) / trackLength * (max - min) + min;\n          break;\n\n        case types_1.Direction.Down:\n          newValue = (clientY - trackRect.top) / trackLength * (max - min) + min;\n          break;\n\n        case types_1.Direction.Up:\n          newValue = (trackLength - (clientY - trackRect.top)) / trackLength * (max - min) + min;\n          break;\n\n        default:\n          utils_1.assertUnreachable(direction);\n      } // invert for RTL\n\n\n      if (rtl) {\n        newValue = max + min - newValue;\n      }\n\n      if (Math.abs(values[draggedThumbIndex] - newValue) >= step) {\n        onChange(utils_1.replaceAt(values, draggedThumbIndex, _this.normalizeValue(newValue, draggedThumbIndex)));\n      }\n    };\n\n    _this.normalizeValue = function (value, index) {\n      var _a = _this.props,\n          min = _a.min,\n          max = _a.max,\n          step = _a.step,\n          allowOverlap = _a.allowOverlap,\n          values = _a.values;\n      return utils_1.normalizeValue(value, index, min, max, step, allowOverlap, values);\n    };\n\n    _this.onEnd = function (e) {\n      e.preventDefault();\n      document.removeEventListener('mousemove', _this.schdOnMouseMove);\n      document.removeEventListener('touchmove', _this.schdOnTouchMove);\n      document.removeEventListener('mouseup', _this.schdOnEnd);\n      document.removeEventListener('touchup', _this.schdOnEnd);\n      document.removeEventListener('touchcancel', _this.schdOnEnd);\n      if (_this.state.draggedThumbIndex === -1) return;\n\n      _this.setState({\n        draggedThumbIndex: -1\n      }, function () {\n        _this.fireOnFinalChange();\n      });\n    };\n\n    _this.fireOnFinalChange = function () {\n      _this.setState({\n        isChanged: false\n      });\n\n      var _a = _this.props,\n          onFinalChange = _a.onFinalChange,\n          values = _a.values;\n\n      if (onFinalChange) {\n        onFinalChange(values);\n      }\n    };\n\n    _this.schdOnMouseMove = utils_1.schd(_this.onMouseMove);\n    _this.schdOnTouchMove = utils_1.schd(_this.onTouchMove);\n    _this.schdOnEnd = utils_1.schd(_this.onEnd);\n    _this.schdOnResize = utils_1.schd(_this.onResize);\n    _this.thumbRefs = props.values.map(function () {\n      return React.createRef();\n    });\n\n    if (!utils_1.isStepDivisible(props.min, props.max, props.step)) {\n      console.warn('The difference of `max` and `min` must be divisible by `step`');\n    }\n\n    return _this;\n  }\n\n  Range.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var _a = this.props,\n        values = _a.values,\n        min = _a.min,\n        step = _a.step; // @ts-ignore\n\n    this.resizeObserver = window.ResizeObserver ? // @ts-ignore\n    new window.ResizeObserver(this.schdOnResize) : {\n      observe: function () {\n        return window.addEventListener('resize', _this.schdOnResize);\n      },\n      unobserve: function () {\n        return window.removeEventListener('resize', _this.schdOnResize);\n      }\n    };\n    document.addEventListener('touchstart', this.onMouseOrTouchStart, {\n      passive: false\n    });\n    document.addEventListener('mousedown', this.onMouseOrTouchStart, {\n      passive: false\n    });\n    !this.props.allowOverlap && utils_1.checkInitialOverlap(this.props.values);\n    this.props.values.forEach(function (value) {\n      return utils_1.checkBoundaries(value, _this.props.min, _this.props.max);\n    });\n    this.resizeObserver.observe(this.trackRef.current);\n    utils_1.translateThumbs(this.getThumbs(), this.getOffsets(), this.props.rtl);\n    values.forEach(function (value) {\n      if (!utils_1.isStepDivisible(min, value, step)) {\n        console.warn('The `values` property is in conflict with the current `step`, `min` and `max` properties. Please provide values that are accessible using the min, max an step values');\n      }\n    });\n  };\n\n  Range.prototype.componentDidUpdate = function (prevProps) {\n    utils_1.translateThumbs(this.getThumbs(), this.getOffsets(), this.props.rtl);\n  };\n\n  Range.prototype.componentWillUnmount = function () {\n    var options = {\n      passive: false\n    };\n    document.removeEventListener('mousedown', this.onMouseOrTouchStart, options);\n    document.removeEventListener('touchstart', this.onMouseOrTouchStart);\n    document.removeEventListener('touchend', this.schdOnEnd);\n    this.resizeObserver.unobserve(this.trackRef.current);\n  };\n\n  Range.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        renderTrack = _a.renderTrack,\n        renderThumb = _a.renderThumb,\n        values = _a.values,\n        min = _a.min,\n        max = _a.max,\n        allowOverlap = _a.allowOverlap,\n        disabled = _a.disabled;\n    var _b = this.state,\n        draggedThumbIndex = _b.draggedThumbIndex,\n        thumbZIndexes = _b.thumbZIndexes;\n    return renderTrack({\n      props: {\n        style: {\n          // creates stacking context that prevents z-index applied to thumbs\n          // interfere with other elements\n          transform: 'scale(1)',\n          cursor: draggedThumbIndex > -1 ? 'grabbing' : values.length === 1 && !disabled ? 'pointer' : 'inherit'\n        },\n        onMouseDown: disabled ? utils_1.voidFn : this.onMouseDownTrack,\n        onTouchStart: disabled ? utils_1.voidFn : this.onTouchStartTrack,\n        ref: this.trackRef\n      },\n      isDragged: this.state.draggedThumbIndex > -1,\n      disabled: disabled,\n      children: values.map(function (value, index) {\n        var isDragged = _this.state.draggedThumbIndex === index;\n        return renderThumb({\n          index: index,\n          value: value,\n          isDragged: isDragged,\n          props: {\n            style: {\n              position: 'absolute',\n              zIndex: thumbZIndexes[index],\n              cursor: disabled ? 'inherit' : isDragged ? 'grabbing' : 'grab',\n              userSelect: 'none',\n              touchAction: 'none',\n              WebkitUserSelect: 'none',\n              MozUserSelect: 'none',\n              msUserSelect: 'none'\n            },\n            key: index,\n            tabIndex: disabled ? undefined : 0,\n            'aria-valuemax': allowOverlap ? max : values[index + 1] || max,\n            'aria-valuemin': allowOverlap ? min : values[index - 1] || min,\n            'aria-valuenow': value,\n            draggable: false,\n            ref: _this.thumbRefs[index],\n            role: 'slider',\n            onKeyDown: disabled ? utils_1.voidFn : _this.onKeyDown,\n            onKeyUp: disabled ? utils_1.voidFn : _this.onKeyUp\n          }\n        });\n      })\n    });\n  };\n\n  Range.defaultProps = {\n    step: 1,\n    direction: types_1.Direction.Right,\n    rtl: false,\n    disabled: false,\n    allowOverlap: false,\n    min: 0,\n    max: 100\n  };\n  return Range;\n}(React.Component);\n\nexports.default = Range;","map":{"version":3,"sources":["/home/zhiguangda/ITS/deckgl/node_modules/react-range/lib/Range.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__importStar","mod","__esModule","result","k","call","defineProperty","exports","value","React","require","utils_1","types_1","INCREASE_KEYS","DECREASE_KEYS","Range","_super","props","_this","trackRef","createRef","thumbRefs","state","draggedThumbIndex","thumbZIndexes","values","length","fill","map","t","i","isChanged","getOffsets","_a","direction","min","max","trackElement","current","trackRect","getBoundingClientRect","trackPadding","getPaddingAndBorder","getThumbs","thumb","index","thumbOffsets","x","y","thumbRect","thumbMargins","getMargin","Direction","Right","left","height","top","width","relativeValue","Left","right","Up","Down","assertUnreachable","from","children","console","warn","getTargetIndex","e","findIndex","child","target","contains","addTouchEvents","document","addEventListener","schdOnTouchMove","passive","schdOnEnd","addMouseEvents","schdOnMouseMove","onMouseDownTrack","button","focus","persist","preventDefault","nativeEvent","setState","onMove","clientX","clientY","onResize","translateThumbs","rtl","onTouchStartTrack","touches","onMouseOrTouchStart","disabled","isTouch","isTouchEvent","Math","apply","onMouseMove","onTouchMove","onKeyDown","onChange","step","inverter","includes","key","replaceAt","normalizeValue","fireOnFinalChange","onKeyUp","trackLength","isVertical","newValue","abs","allowOverlap","onEnd","removeEventListener","onFinalChange","schd","schdOnResize","isStepDivisible","componentDidMount","resizeObserver","window","ResizeObserver","observe","unobserve","checkInitialOverlap","forEach","checkBoundaries","componentDidUpdate","prevProps","componentWillUnmount","options","render","renderTrack","renderThumb","_b","style","transform","cursor","onMouseDown","voidFn","onTouchStart","ref","isDragged","position","zIndex","userSelect","touchAction","WebkitUserSelect","MozUserSelect","msUserSelect","tabIndex","undefined","draggable","role","defaultProps","Component","default"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar utils_1 = require(\"./utils\");\nvar types_1 = require(\"./types\");\nvar INCREASE_KEYS = ['ArrowRight', 'ArrowUp', 'k', 'PageUp'];\nvar DECREASE_KEYS = ['ArrowLeft', 'ArrowDown', 'j', 'PageDown'];\nvar Range = /** @class */ (function (_super) {\n    __extends(Range, _super);\n    function Range(props) {\n        var _this = _super.call(this, props) || this;\n        _this.trackRef = React.createRef();\n        _this.thumbRefs = [];\n        _this.state = {\n            draggedThumbIndex: -1,\n            thumbZIndexes: new Array(_this.props.values.length).fill(0).map(function (t, i) { return i; }),\n            isChanged: false\n        };\n        _this.getOffsets = function () {\n            var _a = _this.props, direction = _a.direction, values = _a.values, min = _a.min, max = _a.max;\n            var trackElement = _this.trackRef.current;\n            var trackRect = trackElement.getBoundingClientRect();\n            var trackPadding = utils_1.getPaddingAndBorder(trackElement);\n            return _this.getThumbs().map(function (thumb, index) {\n                var thumbOffsets = { x: 0, y: 0 };\n                var thumbRect = thumb.getBoundingClientRect();\n                var thumbMargins = utils_1.getMargin(thumb);\n                switch (direction) {\n                    case types_1.Direction.Right:\n                        thumbOffsets.x = (thumbMargins.left + trackPadding.left) * -1;\n                        thumbOffsets.y =\n                            ((thumbRect.height - trackRect.height) / 2 + trackPadding.top) * -1;\n                        thumbOffsets.x +=\n                            trackRect.width * utils_1.relativeValue(values[index], min, max) -\n                                thumbRect.width / 2;\n                        return thumbOffsets;\n                    case types_1.Direction.Left:\n                        thumbOffsets.x = (thumbMargins.right + trackPadding.right) * -1;\n                        thumbOffsets.y =\n                            ((thumbRect.height - trackRect.height) / 2 + trackPadding.top) * -1;\n                        thumbOffsets.x +=\n                            trackRect.width -\n                                trackRect.width * utils_1.relativeValue(values[index], min, max) -\n                                thumbRect.width / 2;\n                        return thumbOffsets;\n                    case types_1.Direction.Up:\n                        thumbOffsets.x =\n                            ((thumbRect.width - trackRect.width) / 2 +\n                                thumbMargins.left +\n                                trackPadding.left) *\n                                -1;\n                        thumbOffsets.y = -trackPadding.left;\n                        thumbOffsets.y +=\n                            trackRect.height -\n                                trackRect.height * utils_1.relativeValue(values[index], min, max) -\n                                thumbRect.height / 2;\n                        return thumbOffsets;\n                    case types_1.Direction.Down:\n                        thumbOffsets.x =\n                            ((thumbRect.width - trackRect.width) / 2 +\n                                thumbMargins.left +\n                                trackPadding.left) *\n                                -1;\n                        thumbOffsets.y = -trackPadding.left;\n                        thumbOffsets.y +=\n                            trackRect.height * utils_1.relativeValue(values[index], min, max) -\n                                thumbRect.height / 2;\n                        return thumbOffsets;\n                    default:\n                        return utils_1.assertUnreachable(direction);\n                }\n            });\n        };\n        _this.getThumbs = function () {\n            if (_this.trackRef && _this.trackRef.current) {\n                return Array.from(_this.trackRef.current.children);\n            }\n            console.warn('No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?');\n            return [];\n        };\n        _this.getTargetIndex = function (e) {\n            return _this.getThumbs().findIndex(function (child) { return child === e.target || child.contains(e.target); });\n        };\n        _this.addTouchEvents = function (e) {\n            document.addEventListener('touchmove', _this.schdOnTouchMove, {\n                passive: false\n            });\n            document.addEventListener('touchend', _this.schdOnEnd, {\n                passive: false\n            });\n            document.addEventListener('touchcancel', _this.schdOnEnd, {\n                passive: false\n            });\n        };\n        _this.addMouseEvents = function (e) {\n            document.addEventListener('mousemove', _this.schdOnMouseMove);\n            document.addEventListener('mouseup', _this.schdOnEnd);\n        };\n        _this.onMouseDownTrack = function (e) {\n            var _a;\n            // in case there is a single thumb, we want to support\n            // moving the thumb to a place where the track is clicked\n            if (e.button !== 0 || _this.props.values.length > 1)\n                return;\n            (_a = _this.thumbRefs[0].current) === null || _a === void 0 ? void 0 : _a.focus();\n            e.persist();\n            e.preventDefault();\n            _this.addMouseEvents(e.nativeEvent);\n            _this.setState({\n                draggedThumbIndex: 0\n            }, function () { return _this.onMove(e.clientX, e.clientY); });\n        };\n        _this.onResize = function () {\n            utils_1.translateThumbs(_this.getThumbs(), _this.getOffsets(), _this.props.rtl);\n        };\n        _this.onTouchStartTrack = function (e) {\n            // in case there is a single thumb, we want to support\n            // moving the thumb to a place where the track is clicked\n            if (_this.props.values.length > 1)\n                return;\n            e.persist();\n            _this.addTouchEvents(e.nativeEvent);\n            _this.setState({\n                draggedThumbIndex: 0\n            }, function () { return _this.onMove(e.touches[0].clientX, e.touches[0].clientY); });\n        };\n        _this.onMouseOrTouchStart = function (e) {\n            if (_this.props.disabled)\n                return;\n            var isTouch = utils_1.isTouchEvent(e);\n            if (!isTouch && e.button !== 0)\n                return;\n            var index = _this.getTargetIndex(e);\n            if (index === -1)\n                return;\n            if (isTouch) {\n                _this.addTouchEvents(e);\n            }\n            else {\n                _this.addMouseEvents(e);\n            }\n            _this.setState({\n                draggedThumbIndex: index,\n                thumbZIndexes: _this.state.thumbZIndexes.map(function (t, i) {\n                    if (i === index) {\n                        return Math.max.apply(Math, _this.state.thumbZIndexes);\n                    }\n                    return t <= _this.state.thumbZIndexes[index] ? t : t - 1;\n                })\n            });\n        };\n        _this.onMouseMove = function (e) {\n            e.preventDefault();\n            _this.onMove(e.clientX, e.clientY);\n        };\n        _this.onTouchMove = function (e) {\n            e.preventDefault();\n            _this.onMove(e.touches[0].clientX, e.touches[0].clientY);\n        };\n        _this.onKeyDown = function (e) {\n            var _a = _this.props, values = _a.values, onChange = _a.onChange, step = _a.step, rtl = _a.rtl;\n            var isChanged = _this.state.isChanged;\n            var index = _this.getTargetIndex(e.nativeEvent);\n            var inverter = rtl ? -1 : 1;\n            if (index === -1)\n                return;\n            if (INCREASE_KEYS.includes(e.key)) {\n                e.preventDefault();\n                _this.setState({\n                    draggedThumbIndex: index,\n                    isChanged: true\n                });\n                onChange(utils_1.replaceAt(values, index, _this.normalizeValue(values[index] + inverter * (e.key === 'PageUp' ? step * 10 : step), index)));\n            }\n            else if (DECREASE_KEYS.includes(e.key)) {\n                e.preventDefault();\n                _this.setState({\n                    draggedThumbIndex: index,\n                    isChanged: true\n                });\n                onChange(utils_1.replaceAt(values, index, _this.normalizeValue(values[index] -\n                    inverter * (e.key === 'PageDown' ? step * 10 : step), index)));\n            }\n            else if (e.key === 'Tab') {\n                _this.setState({ draggedThumbIndex: -1 }, function () {\n                    // If key pressed when thumb was moving, fire onFinalChange\n                    if (isChanged) {\n                        _this.fireOnFinalChange();\n                    }\n                });\n            }\n            else {\n                if (isChanged) {\n                    _this.fireOnFinalChange();\n                }\n            }\n        };\n        _this.onKeyUp = function (e) {\n            var isChanged = _this.state.isChanged;\n            _this.setState({\n                draggedThumbIndex: -1\n            }, function () {\n                if (isChanged) {\n                    _this.fireOnFinalChange();\n                }\n            });\n        };\n        _this.onMove = function (clientX, clientY) {\n            var draggedThumbIndex = _this.state.draggedThumbIndex;\n            var _a = _this.props, direction = _a.direction, min = _a.min, max = _a.max, onChange = _a.onChange, values = _a.values, step = _a.step, rtl = _a.rtl;\n            if (draggedThumbIndex === -1)\n                return null;\n            var trackElement = _this.trackRef.current;\n            var trackRect = trackElement.getBoundingClientRect();\n            var trackLength = utils_1.isVertical(direction)\n                ? trackRect.height\n                : trackRect.width;\n            var newValue = 0;\n            switch (direction) {\n                case types_1.Direction.Right:\n                    newValue =\n                        ((clientX - trackRect.left) / trackLength) * (max - min) + min;\n                    break;\n                case types_1.Direction.Left:\n                    newValue =\n                        ((trackLength - (clientX - trackRect.left)) / trackLength) *\n                            (max - min) +\n                            min;\n                    break;\n                case types_1.Direction.Down:\n                    newValue =\n                        ((clientY - trackRect.top) / trackLength) * (max - min) + min;\n                    break;\n                case types_1.Direction.Up:\n                    newValue =\n                        ((trackLength - (clientY - trackRect.top)) / trackLength) *\n                            (max - min) +\n                            min;\n                    break;\n                default:\n                    utils_1.assertUnreachable(direction);\n            }\n            // invert for RTL\n            if (rtl) {\n                newValue = max + min - newValue;\n            }\n            if (Math.abs(values[draggedThumbIndex] - newValue) >= step) {\n                onChange(utils_1.replaceAt(values, draggedThumbIndex, _this.normalizeValue(newValue, draggedThumbIndex)));\n            }\n        };\n        _this.normalizeValue = function (value, index) {\n            var _a = _this.props, min = _a.min, max = _a.max, step = _a.step, allowOverlap = _a.allowOverlap, values = _a.values;\n            return utils_1.normalizeValue(value, index, min, max, step, allowOverlap, values);\n        };\n        _this.onEnd = function (e) {\n            e.preventDefault();\n            document.removeEventListener('mousemove', _this.schdOnMouseMove);\n            document.removeEventListener('touchmove', _this.schdOnTouchMove);\n            document.removeEventListener('mouseup', _this.schdOnEnd);\n            document.removeEventListener('touchup', _this.schdOnEnd);\n            document.removeEventListener('touchcancel', _this.schdOnEnd);\n            if (_this.state.draggedThumbIndex === -1)\n                return;\n            _this.setState({ draggedThumbIndex: -1 }, function () {\n                _this.fireOnFinalChange();\n            });\n        };\n        _this.fireOnFinalChange = function () {\n            _this.setState({ isChanged: false });\n            var _a = _this.props, onFinalChange = _a.onFinalChange, values = _a.values;\n            if (onFinalChange) {\n                onFinalChange(values);\n            }\n        };\n        _this.schdOnMouseMove = utils_1.schd(_this.onMouseMove);\n        _this.schdOnTouchMove = utils_1.schd(_this.onTouchMove);\n        _this.schdOnEnd = utils_1.schd(_this.onEnd);\n        _this.schdOnResize = utils_1.schd(_this.onResize);\n        _this.thumbRefs = props.values.map(function () { return React.createRef(); });\n        if (!utils_1.isStepDivisible(props.min, props.max, props.step)) {\n            console.warn('The difference of `max` and `min` must be divisible by `step`');\n        }\n        return _this;\n    }\n    Range.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, values = _a.values, min = _a.min, step = _a.step;\n        // @ts-ignore\n        this.resizeObserver = (window.ResizeObserver)\n            // @ts-ignore\n            ? new window.ResizeObserver(this.schdOnResize)\n            : {\n                observe: function () { return window.addEventListener('resize', _this.schdOnResize); },\n                unobserve: function () { return window.removeEventListener('resize', _this.schdOnResize); }\n            };\n        document.addEventListener('touchstart', this.onMouseOrTouchStart, {\n            passive: false\n        });\n        document.addEventListener('mousedown', this.onMouseOrTouchStart, {\n            passive: false\n        });\n        !this.props.allowOverlap && utils_1.checkInitialOverlap(this.props.values);\n        this.props.values.forEach(function (value) {\n            return utils_1.checkBoundaries(value, _this.props.min, _this.props.max);\n        });\n        this.resizeObserver.observe(this.trackRef.current);\n        utils_1.translateThumbs(this.getThumbs(), this.getOffsets(), this.props.rtl);\n        values.forEach(function (value) {\n            if (!utils_1.isStepDivisible(min, value, step)) {\n                console.warn('The `values` property is in conflict with the current `step`, `min` and `max` properties. Please provide values that are accessible using the min, max an step values');\n            }\n        });\n    };\n    Range.prototype.componentDidUpdate = function (prevProps) {\n        utils_1.translateThumbs(this.getThumbs(), this.getOffsets(), this.props.rtl);\n    };\n    Range.prototype.componentWillUnmount = function () {\n        var options = {\n            passive: false\n        };\n        document.removeEventListener('mousedown', this.onMouseOrTouchStart, options);\n        document.removeEventListener('touchstart', this.onMouseOrTouchStart);\n        document.removeEventListener('touchend', this.schdOnEnd);\n        this.resizeObserver.unobserve(this.trackRef.current);\n    };\n    Range.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, renderTrack = _a.renderTrack, renderThumb = _a.renderThumb, values = _a.values, min = _a.min, max = _a.max, allowOverlap = _a.allowOverlap, disabled = _a.disabled;\n        var _b = this.state, draggedThumbIndex = _b.draggedThumbIndex, thumbZIndexes = _b.thumbZIndexes;\n        return renderTrack({\n            props: {\n                style: {\n                    // creates stacking context that prevents z-index applied to thumbs\n                    // interfere with other elements\n                    transform: 'scale(1)',\n                    cursor: draggedThumbIndex > -1\n                        ? 'grabbing'\n                        : values.length === 1 && !disabled\n                            ? 'pointer'\n                            : 'inherit'\n                },\n                onMouseDown: disabled ? utils_1.voidFn : this.onMouseDownTrack,\n                onTouchStart: disabled ? utils_1.voidFn : this.onTouchStartTrack,\n                ref: this.trackRef\n            },\n            isDragged: this.state.draggedThumbIndex > -1,\n            disabled: disabled,\n            children: values.map(function (value, index) {\n                var isDragged = _this.state.draggedThumbIndex === index;\n                return renderThumb({\n                    index: index,\n                    value: value,\n                    isDragged: isDragged,\n                    props: {\n                        style: {\n                            position: 'absolute',\n                            zIndex: thumbZIndexes[index],\n                            cursor: disabled ? 'inherit' : isDragged ? 'grabbing' : 'grab',\n                            userSelect: 'none',\n                            touchAction: 'none',\n                            WebkitUserSelect: 'none',\n                            MozUserSelect: 'none',\n                            msUserSelect: 'none'\n                        },\n                        key: index,\n                        tabIndex: disabled ? undefined : 0,\n                        'aria-valuemax': allowOverlap ? max : values[index + 1] || max,\n                        'aria-valuemin': allowOverlap ? min : values[index - 1] || min,\n                        'aria-valuenow': value,\n                        draggable: false,\n                        ref: _this.thumbRefs[index],\n                        role: 'slider',\n                        onKeyDown: disabled ? utils_1.voidFn : _this.onKeyDown,\n                        onKeyUp: disabled ? utils_1.voidFn : _this.onKeyUp\n                    }\n                });\n            })\n        });\n    };\n    Range.defaultProps = {\n        step: 1,\n        direction: types_1.Direction.Right,\n        rtl: false,\n        disabled: false,\n        allowOverlap: false,\n        min: 0,\n        max: 100\n    };\n    return Range;\n}(React.Component));\nexports.default = Range;\n"]},"metadata":{},"sourceType":"script"}