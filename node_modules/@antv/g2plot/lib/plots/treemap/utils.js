"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.transformData = void 0;
var tslib_1 = require("tslib");
var treemap_1 = require("../../utils/hierarchy/treemap");
function transformData(options) {
    var data = options.data, colorField = options.colorField, hierarchyConfig = options.hierarchyConfig;
    var nodes = treemap_1.treemap(data, tslib_1.__assign(tslib_1.__assign({}, hierarchyConfig), { 
        // @ts-ignore
        type: 'hierarchy.treemap', field: 'value', as: ['x', 'y'] }));
    var result = [];
    nodes.forEach(function (node) {
        if (!node.children) {
            var eachNode = Object.assign({}, node.data, {
                x: node.x,
                y: node.y,
                depth: node.depth,
                value: node.value,
            });
            if (!node.data[colorField] && node.parent) {
                var ancestorNode = node.ancestors().find(function (n) { return n.data[colorField]; });
                eachNode[colorField] = ancestorNode === null || ancestorNode === void 0 ? void 0 : ancestorNode.data[colorField];
            }
            else {
                eachNode[colorField] = node.data[colorField];
            }
            result.push(eachNode);
        }
    });
    return result;
}
exports.transformData = transformData;
//# sourceMappingURL=utils.js.map